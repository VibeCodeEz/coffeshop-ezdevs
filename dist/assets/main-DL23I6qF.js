const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabase-DUCcTezS.js","assets/vendor-7JHeT-bl.js"])))=>i.map(i=>d[i]);
import{r as Re,b as Ue,g as Be}from"./vendor-7JHeT-bl.js";import{r as x,c as He,a as ve}from"./supabase-DUCcTezS.js";import{u as qe,L as A,B as Ve,R as Je,a as W,N as ne}from"./router-BwUzx4qF.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))g(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&g(r)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function g(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();var je={exports:{}},ce={};var Se;function We(){if(Se)return ce;Se=1;var s=Re(),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function r(d,c,v){var j,i={},p=null,C=null;v!==void 0&&(p=""+v),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(C=c.ref);for(j in c)g.call(c,j)&&!n.hasOwnProperty(j)&&(i[j]=c[j]);if(d&&d.defaultProps)for(j in c=d.defaultProps,c)i[j]===void 0&&(i[j]=c[j]);return{$$typeof:l,type:d,key:p,ref:C,props:i,_owner:a.current}}return ce.Fragment=o,ce.jsx=r,ce.jsxs=r,ce}var ze;function Ze(){return ze||(ze=1,je.exports=We()),je.exports}var e=Ze(),de={},Me;function Ge(){if(Me)return de;Me=1;var s=Ue();return de.createRoot=s.createRoot,de.hydrateRoot=s.hydrateRoot,de}var Ye=Ge();const Qe=Be(Ye);var Xe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ke=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),es=(s,l)=>{const o=x.forwardRef(({color:g="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:d,...c},v)=>x.createElement("svg",{ref:v,...Xe,width:a,height:a,stroke:g,strokeWidth:r?Number(n)*24/Number(a):n,className:`lucide lucide-${Ke(s)}`,...c},[...l.map(([j,i])=>x.createElement(j,i)),...(Array.isArray(d)?d:[d])||[]]));return o.displayName=`${s}`,o};var z=es;const ss=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),as=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ts=z("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),rs=z("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Pe=z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),is=z("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),fe=z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),me=z("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ns=z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),cs=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Q=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),X=z("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Ee=z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ye=z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ls=z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),xe=z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),os=z("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Fe=z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Ae=z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ds=z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ms=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),hs=z("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),us=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),xs=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),pe=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),we=z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ps=z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ie=z("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Ne=z("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Te=z("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),he=z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Y=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),js=z("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),De=z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ce=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),gs=z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),vs=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Oe=z("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ue=z("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Z=z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),fs=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),R=z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),oe=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ys=z("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ns=z("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),bs=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),te=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),le=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ws=z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),K=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Cs=z("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),ks="https://luolyadipwdyvovcjgvv.supabase.co",_s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1b2x5YWRpcHdkeXZvdmNqZ3Z2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0ODM3ODEsImV4cCI6MjA4MDA1OTc4MX0.FTz9KJm6KBc0ijbXwZU-PtJoWURkZ4HGeMMThOoP9qs",S=He(ks,_s,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:2}}}),ke=async()=>{try{return console.log("ðŸ” Testing Supabase connection..."),await S.from("menu_items").select("*").limit(1),console.log("âœ… Connection OK"),!0}catch(s){return console.error("ðŸ’¥ Connection failed:",s),!1}},Ss=()=>Math.floor(100+Math.random()*900).toString(),ge=s=>s==="coffeeadmin@admin.com",zs=s=>s.sizes?.filter(l=>l.available)||[],be=s=>`$${s.toFixed(2)}`,$e=x.createContext(void 0),ee=()=>{const s=x.useContext($e);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Ms=({children:s})=>{const[l,o]=x.useState(null),[g,a]=x.useState(null),[n,r]=x.useState(null),[d,c]=x.useState(!0),v=n?.role==="admin"||ge(l?.email);x.useEffect(()=>{const t=async()=>{try{console.log("ðŸ” Initializing authentication...");const{data:{session:w},error:b}=await S.auth.getSession();if(b){console.error("Error getting session:",b),c(!1);return}console.log("Initial session check:",w?"âœ… Session found":"âŒ No session"),a(w),o(w?.user??null),w?.user?(console.log("ðŸ‘¤ User found, setting as authenticated and fetching profile..."),c(!1),j(w.user.id).catch(k=>{console.error("Profile fetch failed, but user remains authenticated:",k)})):(console.log("âŒ No session found, user not authenticated"),c(!1))}catch(w){console.error("Error initializing auth:",w),c(!1)}},m=setTimeout(()=>{console.warn("Session check timeout - proceeding without authentication"),c(!1)},3e3);t().finally(()=>{clearTimeout(m)});const{data:{subscription:N}}=S.auth.onAuthStateChange(async(w,b)=>{console.log(`ðŸ”„ Auth state change: ${w}`,b?"âœ… Session exists":"âŒ No session"),(w==="SIGNED_IN"||w==="SIGNED_OUT"||w==="TOKEN_REFRESHED"||w==="INITIAL_SESSION")&&(a(b),o(b?.user??null),b?.user?(console.log(`ðŸ‘¤ ${w}: User authenticated, fetching profile in background...`),d&&c(!1),j(b.user.id).catch(k=>{console.error(`Profile fetch failed after ${w}, but user remains authenticated:`,k),i(b.user.id).catch(q=>{console.error("Basic profile creation also failed:",q)})})):w==="SIGNED_OUT"&&(console.log("ðŸšª User signed out, clearing profile"),r(null),c(!1)))});return()=>{clearTimeout(m),N.unsubscribe()}},[]);const j=async t=>{try{console.log("ðŸ” Fetching user profile for:",t);const{data:m,error:N}=await S.from("user_profiles").select("id, email, full_name, phone, role, created_at, updated_at").eq("id",t).maybeSingle();if(N){console.warn("Profile fetch error (will create basic profile):",N.message),await i(t);return}m?(console.log("âœ… Profile loaded successfully:",m.role),r(m)):(console.log("ðŸ“ No profile found, creating basic profile..."),await i(t))}catch(m){console.warn("Profile fetch failed, creating basic profile as fallback:",m),await i(t)}},i=async t=>{try{console.log("ðŸ“ Creating basic profile for user:",t);const{data:m}=await S.auth.getUser();if(!m.user){console.warn("No user data available for profile creation");return}const N=m.user.email||"",w=ge(N)?"admin":"customer",b={id:t,email:N,role:w,full_name:m.user.user_metadata?.full_name||N.split("@")[0]||"User",phone:m.user.user_metadata?.phone||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r(b),console.log(`âœ… Basic profile created successfully for ${w}:`,N);try{await S.from("user_profiles").upsert(b,{onConflict:"id"}),console.log("ðŸ“¦ Profile saved to database successfully")}catch(k){console.warn("Profile not saved to database (continuing with memory profile):",k)}}catch(m){if(console.error("Error creating basic profile:",m),l?.email){const N={id:t,email:l.email,role:ge(l.email)?"admin":"customer",full_name:l.email.split("@")[0]||"User",phone:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r(N),console.log("ðŸ”„ Fallback profile created from session data")}}},h={user:l,session:g,profile:n,loading:d,isAdminUser:v,signIn:async(t,m)=>{try{const{data:N,error:w}=await S.auth.signInWithPassword({email:t,password:m});if(w)throw w;return{data:N,error:null}}catch(N){return{data:null,error:N}}},signOut:async()=>{try{console.log("Starting sign out process..."),o(null),a(null),r(null),localStorage.clear(),sessionStorage.clear(),await S.auth.signOut({scope:"global"}),console.log("Sign out completed, refreshing page..."),window.location.href=window.location.origin}catch(t){console.error("Error during sign out:",t),o(null),a(null),r(null),localStorage.clear(),sessionStorage.clear(),window.location.href=window.location.origin}},updateProfile:async t=>{if(!(!l||!n))try{const m={...n,...t,updated_at:new Date().toISOString()};r(m),console.log("Profile updated in local state:",m)}catch(m){throw console.error("Error updating profile:",m),m}}};return e.jsx($e.Provider,{value:h,children:s})},Es=()=>{const[s,l]=x.useState(!1),[o,g]=x.useState(!1),{user:a,profile:n,isAdminUser:r,signOut:d}=ee(),c=qe(),v=()=>{l(!s)},j=()=>{g(!o)},i=async()=>{g(!1),await d()},p=()=>{c("/menu")};return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs(A,{to:"/",className:"logo",children:[e.jsx(X,{size:32}),e.jsx("span",{children:"EzDevs Coffee"})]}),e.jsxs("nav",{className:"nav desktop-nav",children:[e.jsx(A,{to:"/",className:"nav-link",children:"Home"}),e.jsx(A,{to:"/menu",className:"nav-link",children:"Menu"}),r&&e.jsx(A,{to:"/admin",className:"nav-link",children:"Dashboard"}),!r&&e.jsxs(e.Fragment,{children:[e.jsx(A,{to:"/about",className:"nav-link",children:"About"}),e.jsx(A,{to:"/contact",className:"nav-link",children:"Contact"})]})]}),e.jsx("div",{className:"user-menu-container",children:a?e.jsxs(e.Fragment,{children:[!r&&e.jsx(A,{to:"/menu",className:"btn btn-primary order-btn",children:"Order Now"}),e.jsxs("div",{className:"user-menu",children:[e.jsxs("button",{className:"user-menu-trigger",onClick:j,children:[e.jsx(te,{size:20}),e.jsx("span",{className:"user-name",children:n?.full_name||a?.email?.split("@")[0]||"User"})]}),o&&e.jsxs("div",{className:"user-menu-dropdown",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-email",children:a?.email}),e.jsx("div",{className:"user-role",children:r?"Administrator":"Customer"})]}),e.jsx("div",{className:"menu-divider"}),r?e.jsxs(e.Fragment,{children:[e.jsxs(A,{to:"/admin",className:"menu-item",onClick:()=>g(!1),children:[e.jsx(vs,{size:16}),"Admin Dashboard"]}),e.jsxs(A,{to:"/cashier",className:"menu-item",onClick:()=>g(!1),children:[e.jsx(X,{size:16}),"Cashier"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(A,{to:"/orders",className:"menu-item",onClick:()=>g(!1),children:[e.jsx(X,{size:16}),"My Orders"]}),e.jsxs(A,{to:"/cart",className:"menu-item",onClick:()=>g(!1),children:[e.jsx(te,{size:16}),"My Cart"]})]}),e.jsxs("button",{className:"menu-item logout-btn",onClick:i,type:"button",children:[e.jsx(xs,{size:16}),"Sign Out"]})]})]})]}):e.jsxs("div",{className:"auth-buttons",children:[e.jsx(A,{to:"/auth",className:"btn btn-secondary login-btn",children:"Staff Login"}),e.jsx("button",{onClick:p,className:"btn btn-primary order-btn",children:"Order Now"})]})}),e.jsx("button",{className:"mobile-menu-btn",onClick:v,children:s?e.jsx(K,{size:24}):e.jsx(ps,{size:24})})]}),s&&e.jsxs("nav",{className:"nav mobile-nav",children:[e.jsx(A,{to:"/",className:"nav-link",onClick:v,children:"Home"}),e.jsx(A,{to:"/menu",className:"nav-link",onClick:v,children:"Menu"}),a?e.jsxs(e.Fragment,{children:[r?e.jsxs(e.Fragment,{children:[e.jsx(A,{to:"/admin",className:"nav-link",onClick:v,children:"Dashboard"}),e.jsx(A,{to:"/cashier",className:"nav-link",onClick:v,children:"Cashier"})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{to:"/about",className:"nav-link",onClick:v,children:"About"}),e.jsx(A,{to:"/contact",className:"nav-link",onClick:v,children:"Contact"}),e.jsx(A,{to:"/orders",className:"nav-link",onClick:v,children:"My Orders"}),e.jsx(A,{to:"/cart",className:"nav-link",onClick:v,children:"My Cart"})]}),e.jsx("button",{className:"mobile-logout-btn",onClick:()=>{v(),i()},type:"button",children:"Sign Out"})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{to:"/about",className:"nav-link",onClick:v,children:"About"}),e.jsx(A,{to:"/contact",className:"nav-link",onClick:v,children:"Contact"}),e.jsx(A,{to:"/auth",className:"btn btn-secondary mobile-login-btn",onClick:v,children:"Staff Login"})]}),!a&&e.jsx("button",{className:"btn btn-primary mobile-order-btn",onClick:()=>{p(),v()},children:"Order Now"})]})]})})},Os=()=>e.jsx("footer",{className:"footer",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section",children:[e.jsxs("div",{className:"footer-logo",children:[e.jsx(X,{size:28}),e.jsx("span",{children:"EzDevs Coffee"})]}),e.jsx("p",{children:"Your premier destination for exceptional coffee experiences. Crafting perfect moments, one cup at a time since 2024."}),e.jsxs("div",{className:"social-links",children:[e.jsx("a",{href:"https://facebook.com/EzDevsCoffee",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:e.jsx(os,{size:20})}),e.jsx("a",{href:"https://instagram.com/ezdevscoffee",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:e.jsx(hs,{size:20})}),e.jsx("a",{href:"https://twitter.com/ezdevscoffee",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Ns,{size:20})}),e.jsx("a",{href:"https://youtube.com/@EzDevsCoffee",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Cs,{size:20})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{children:"Quick Links"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"/",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"/menu",children:"Menu"})}),e.jsx("li",{children:e.jsx("a",{href:"/about",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",children:"Contact"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{children:"Contact Us"}),e.jsxs("div",{className:"contact-item",children:[e.jsx(we,{size:18}),e.jsx("span",{children:"221 Brewline Avenue, Manila 1001, Philippines"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(he,{size:18}),e.jsx("span",{children:"+63 912 345 6789"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(pe,{size:18}),e.jsx("span",{children:"contact@ezdevscoffee.com"})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{children:"Hours"}),e.jsxs("div",{className:"hours-list",children:[e.jsxs("div",{className:"hour-item",children:[e.jsx("span",{children:"Mon - Thu"}),e.jsx("span",{children:"8:00 AM - 10:00 PM"})]}),e.jsxs("div",{className:"hour-item",children:[e.jsx("span",{children:"Friday"}),e.jsx("span",{children:"8:00 AM - 11:00 PM"})]}),e.jsxs("div",{className:"hour-item",children:[e.jsx("span",{children:"Saturday"}),e.jsx("span",{children:"9:00 AM - 11:00 PM"})]}),e.jsxs("div",{className:"hour-item",children:[e.jsx("span",{children:"Sunday"}),e.jsx("span",{children:"9:00 AM - 9:00 PM"})]})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsxs("p",{children:["Â© 2024 EzDevs Coffee. All rights reserved. |",e.jsx("a",{href:"https://www.ezdevscoffee.com",target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"8px",color:"#8b4513"},children:"www.ezdevscoffee.com"})]})})]})}),Is=()=>{const[s,l]=x.useState({x:0,y:0}),[o,g]=x.useState(!1),[a,n]=x.useState(!1);return x.useEffect(()=>{if(document.body.classList.contains("auth-page-body"))return;const r=j=>{l({x:j.clientX,y:j.clientY})},d=j=>{const p=j.target.closest(".cursor-hover, button, a, .product-card, .menu-item, .testimonial-card");g(!!p)},c=()=>n(!0),v=()=>n(!1);return window.addEventListener("mousemove",r),window.addEventListener("mouseover",d),window.addEventListener("mousedown",c),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseover",d),window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",v)}},[]),document.body.classList.contains("auth-page-body")?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`custom-cursor ${o?"hovering":""} ${a?"clicking":""}`,style:{left:`${s.x}px`,top:`${s.y}px`},children:e.jsx("div",{className:"cursor-bean",children:"â˜•"})}),e.jsx("div",{className:`cursor-trail ${o?"hovering":""}`,style:{left:`${s.x}px`,top:`${s.y}px`}})]})},qs=()=>e.jsxs("div",{className:"loading-container",children:[e.jsxs("div",{className:"coffee-cup-loader",children:[e.jsx("div",{className:"cup",children:e.jsx("div",{className:"handle"})}),e.jsxs("div",{className:"steam",children:[e.jsx("div",{className:"steam-line steam-line-1"}),e.jsx("div",{className:"steam-line steam-line-2"}),e.jsx("div",{className:"steam-line steam-line-3"})]})]}),e.jsx("p",{className:"loading-text",children:"Brewing the perfect experience..."})]}),Ps=({items:s,onUpdateQuantity:l,onRemoveItem:o,onCheckout:g})=>{const[a,n]=x.useState(!1),[r,d]=x.useState(!1),c=s.reduce((j,i)=>j+i.quantity,0),v=s.reduce((j,i)=>j+i.price*i.quantity,0);return x.useEffect(()=>{const j=()=>{d(window.scrollY>200)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]),!r&&c===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`sticky-cart-trigger ${r?"visible":""}`,children:e.jsxs("button",{className:"cart-btn",onClick:()=>n(!0),"aria-label":`Shopping cart with ${c} items`,children:[e.jsx(Z,{size:24}),c>0&&e.jsx("span",{className:"cart-count",children:c})]})}),a&&e.jsx("div",{className:"cart-overlay",onClick:()=>n(!1),children:e.jsxs("div",{className:"cart-panel",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"cart-header",children:[e.jsxs("h3",{children:["Your Cart (",c," items)"]}),e.jsx("button",{className:"close-btn",onClick:()=>n(!1),"aria-label":"Close cart",children:e.jsx(K,{size:20})})]}),e.jsx("div",{className:"cart-content",children:s.length===0?e.jsxs("div",{className:"empty-cart",children:[e.jsx(Z,{size:48}),e.jsx("h4",{children:"Your cart is empty"}),e.jsx("p",{children:"Add some delicious coffee to get started!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cart-items",children:s.map(j=>e.jsxs("div",{className:"cart-item",children:[e.jsx("div",{className:"item-image",children:e.jsx("span",{className:"item-emoji",children:j.image})}),e.jsxs("div",{className:"item-details",children:[e.jsx("h4",{children:j.name}),j.size&&e.jsx("span",{className:"item-size",children:j.size}),e.jsxs("div",{className:"item-price",children:["â‚±",j.price.toFixed(2)]})]}),e.jsxs("div",{className:"item-controls",children:[e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>l(j.id,Math.max(0,j.quantity-1)),"aria-label":"Decrease quantity",children:e.jsx(ie,{size:14})}),e.jsx("span",{className:"quantity",children:j.quantity}),e.jsx("button",{onClick:()=>l(j.id,j.quantity+1),"aria-label":"Increase quantity",children:e.jsx(Y,{size:14})})]}),e.jsx("button",{className:"remove-btn",onClick:()=>o(j.id),"aria-label":"Remove item",children:e.jsx(oe,{size:16})})]})]},j.id))}),e.jsxs("div",{className:"cart-summary",children:[e.jsxs("div",{className:"subtotal",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("strong",{children:["â‚±",v.toFixed(2)]})]}),e.jsx("div",{className:"shipping-note",children:e.jsx("small",{children:"Shipping calculated at checkout"})})]})]})}),s.length>0&&e.jsxs("div",{className:"cart-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Continue Shopping"}),e.jsxs("button",{className:"btn btn-primary",onClick:g,children:["Checkout (â‚±",v.toFixed(2),")"]})]})]})})]})},Fs="modulepreload",As=function(s){return"/"+s},Ie={},Ts=function(l,o,g){let a=Promise.resolve();if(o&&o.length>0){let c=function(v){return Promise.all(v.map(j=>Promise.resolve(j).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=r?.nonce||r?.getAttribute("nonce");a=c(o.map(v=>{if(v=As(v),v in Ie)return;Ie[v]=!0;const j=v.endsWith(".css"),i=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${i}`))return;const p=document.createElement("link");if(p.rel=j?"stylesheet":Fs,j||(p.as="script"),p.crossOrigin="",p.href=v,d&&p.setAttribute("nonce",d),document.head.appendChild(p),j)return new Promise((C,E)=>{p.addEventListener("load",C),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${v}`)))})}))}function n(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return a.then(r=>{for(const d of r||[])d.status==="rejected"&&n(d.reason);return l().catch(n)})},Ds=()=>{const[s,l]=x.useState(!1),[o,g]=x.useState(""),[a,n]=x.useState(""),[r,d]=x.useState(""),[c,v]=x.useState(!1),[j,i]=x.useState(!1),[p,C]=x.useState(""),[E,h]=x.useState(""),{signIn:t}=ee(),m=async N=>{if(N.preventDefault(),i(!0),C(""),h(""),o==="coffeeadmin@admin.com")console.log("Creating admin account...");else if(!o.includes("admin")&&!o.includes("cashier")){C("Access restricted to administrators and staff only."),i(!1);return}try{let w;if(s&&o==="coffeeadmin@admin.com"){const{createClient:b}=await Ts(async()=>{const{createClient:q}=await import("./supabase-DUCcTezS.js").then($=>$.i);return{createClient:q}},__vite__mapDeps([0,1]));w=await b("https://luolyadipwdyvovcjgvv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1b2x5YWRpcHdkeXZvdmNqZ3Z2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0ODM3ODEsImV4cCI6MjA4MDA1OTc4MX0.FTz9KJm6KBc0ijbXwZU-PtJoWURkZ4HGeMMThOoP9qs").auth.signUp({email:o,password:a,options:{data:{full_name:r||"Coffee Administrator"}}}),w.error||(h("Admin account created! Please check email for verification, then login."),l(!1),g(""),n(""),d(""))}else w=await t(o,a);w.error?(C(w.error.message),i(!1)):s||(console.log("âœ… Admin login successful"),h("Login successful! Redirecting..."),i(!1))}catch(w){C(w.message||"An error occurred"),i(!1)}};return x.useEffect(()=>(document.body.classList.add("auth-page-body"),()=>{document.body.classList.remove("auth-page-body")}),[]),e.jsx("div",{className:"auth-page",children:e.jsxs("div",{className:"auth-container",children:[e.jsxs("div",{className:"auth-header",children:[e.jsxs("div",{className:"auth-logo",children:[e.jsx(Oe,{size:40}),e.jsx("h1",{children:"Admin Access"})]}),e.jsx("p",{children:s?"Create Admin Account":"Administrator & Staff Login"})]}),o==="coffeeadmin@admin.com"&&e.jsx("div",{style:{marginBottom:"20px",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>l(!s),style:{background:"none",border:"1px solid #8B4513",color:"#8B4513",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:s?"Switch to Login":"Create Admin Account"})}),e.jsxs("form",{onSubmit:m,className:"auth-form",children:[s&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fullName",children:"Admin Name"}),e.jsxs("div",{className:"input-group",children:[e.jsx(Oe,{size:20}),e.jsx("input",{type:"text",id:"fullName",value:r,onChange:N=>d(N.target.value),placeholder:"Enter admin name",required:s})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Admin Email"}),e.jsxs("div",{className:"input-group",children:[e.jsx(pe,{size:20}),e.jsx("input",{type:"email",id:"email",value:o,onChange:N=>g(N.target.value),placeholder:"Enter admin email",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"input-group",children:[e.jsx(us,{size:20}),e.jsx("input",{type:c?"text":"password",id:"password",value:a,onChange:N=>n(N.target.value),placeholder:"Enter your password",required:!0,minLength:6}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>v(!c),children:c?e.jsx(ls,{size:20}):e.jsx(xe,{size:20})})]})]}),p&&e.jsx("div",{className:"error-message",children:p}),E&&e.jsx("div",{className:"success-message",children:E}),e.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:j,children:j?s?"Creating Account...":"Authenticating...":s?"Create Admin Account":"Login"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("div",{className:"admin-hint",children:[e.jsx("p",{children:e.jsx("small",{children:"Access restricted to administrators and staff only"})}),e.jsx("p",{children:e.jsx("small",{children:"Contact system administrator for account credentials"})})]})})]})})},_e=({children:s,backgroundImage:l,speed:o=.5,className:g=""})=>{const[a,n]=x.useState(0),r=x.useRef(null);return x.useEffect(()=>{const d=()=>{if(r.current){const c=r.current.getBoundingClientRect(),j=window.pageYOffset*-o;c.top<=window.innerHeight&&c.bottom>=0&&n(j)}};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[o]),e.jsxs("div",{ref:r,className:`parallax-section ${g}`,children:[e.jsx("div",{className:"parallax-background",style:{transform:`translateY(${a}px)`,backgroundImage:l?`url(${l})`:void 0}}),e.jsx("div",{className:"parallax-content",children:s})]})},re=({children:s,className:l=""})=>e.jsxs("div",{className:`steam-container ${l}`,children:[s,e.jsxs("div",{className:"steam-effect",children:[e.jsx("div",{className:"steam-particle steam-1"}),e.jsx("div",{className:"steam-particle steam-2"}),e.jsx("div",{className:"steam-particle steam-3"}),e.jsx("div",{className:"steam-particle steam-4"}),e.jsx("div",{className:"steam-particle steam-5"})]})]}),$s=()=>{const{user:s}=ee(),l=qe(),o=()=>{s?l("/menu"):(alert("Please login or sign up to start ordering!"),l("/auth"))};return e.jsxs(_e,{className:"hero coffee-beans",speed:.5,children:[e.jsx("div",{className:"hero-background",children:e.jsx("div",{className:"hero-overlay"})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"hero-content",children:[e.jsxs("div",{className:"hero-text",children:[e.jsxs("div",{className:"hero-badge",children:[e.jsx(R,{size:16}),e.jsx("span",{children:"Premium Quality Since 2007"})]}),e.jsxs("h1",{children:["Experience the Perfect",e.jsx("span",{className:"highlight",children:" Coffee Moment"})]}),e.jsx("p",{children:"Discover our carefully crafted blends, made from the finest beans sourced globally. Every cup tells a story of passion, quality, and tradition."}),e.jsxs("div",{className:"hero-actions",children:[e.jsx(re,{className:"button-steam",children:e.jsxs("button",{onClick:o,className:"btn btn-hero-primary cursor-hover",children:[e.jsx(X,{size:20}),"Order Now",e.jsx(as,{size:20})]})}),s?e.jsxs(A,{to:"/about",className:"btn btn-hero-secondary cursor-hover",children:[e.jsx(R,{size:18}),"Our Story"]}):e.jsxs(A,{to:"/auth",className:"btn btn-hero-secondary cursor-hover",children:[e.jsx(R,{size:18}),"Join Us"]})]}),e.jsxs("div",{className:"hero-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"50+"}),e.jsx("span",{className:"stat-label",children:"Coffee Varieties"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"100+"}),e.jsx("span",{className:"stat-label",children:"Locations"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"1M+"}),e.jsx("span",{className:"stat-label",children:"Happy Customers"})]})]})]}),e.jsxs("div",{className:"hero-image",children:[e.jsx(re,{className:"hero-steam",children:e.jsx("div",{className:"coffee-cup cursor-hover",children:e.jsx(X,{size:120})})}),e.jsxs("div",{className:"floating-elements",children:[e.jsx("div",{className:"floating-bean bean-1"}),e.jsx("div",{className:"floating-bean bean-2"}),e.jsx("div",{className:"floating-bean bean-3"})]})]})]})})]})},Ls=({productType:s="medium",className:l=""})=>{const[o,g]=x.useState(!1),n=(r=>{const d={light:[{method:"Pour Over",temperature:"200Â°F (93Â°C)",ratio:"1:16",brewTime:"2-3 minutes",grindSize:"Medium-Fine",tips:["Use a gooseneck kettle","Bloom for 30 seconds","Pour in circles"]},{method:"V60",temperature:"205Â°F (96Â°C)",ratio:"1:15",brewTime:"2:30-3:00",grindSize:"Medium-Fine",tips:["Pre-wet filter","Consistent pouring speed","Total brew time 2:30-3:00"]}],medium:[{method:"French Press",temperature:"195Â°F (90Â°C)",ratio:"1:12",brewTime:"4 minutes",grindSize:"Coarse",tips:["Stir after 30 seconds","Press slowly","Serve immediately"]},{method:"Auto Drip",temperature:"200Â°F (93Â°C)",ratio:"1:15",brewTime:"5-6 minutes",grindSize:"Medium",tips:["Use filtered water","Clean machine regularly","Fresh ground beans"]}],dark:[{method:"French Press",temperature:"190Â°F (88Â°C)",ratio:"1:14",brewTime:"4 minutes",grindSize:"Coarse",tips:["Lower temperature prevents bitterness","Shorter steep time","Coarse grind essential"]},{method:"Cold Brew",temperature:"Cold Water",ratio:"1:8",brewTime:"12-24 hours",grindSize:"Extra Coarse",tips:["Steep in fridge","Strain twice","Dilute if needed"]}],espresso:[{method:"Espresso",temperature:"200Â°F (93Â°C)",ratio:"1:2",brewTime:"25-30 seconds",grindSize:"Fine",tips:["18-20g dose","Even distribution","Consistent tamping pressure"]},{method:"Cappuccino",temperature:"200Â°F (93Â°C)",ratio:"1:2 + steamed milk",brewTime:"25-30 seconds",grindSize:"Fine",tips:["Steam milk to 150Â°F","1:1:1 ratio","Pour art technique"]}]};return d[r]||d.medium})(s);return e.jsxs("div",{className:`brew-guide-tooltip ${l}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[e.jsxs("button",{className:"brew-guide-trigger",children:[e.jsx(ms,{size:16}),e.jsx("span",{children:"Brew Guide"})]}),o&&e.jsxs("div",{className:"brew-guide-popup",children:[e.jsx("div",{className:"popup-header",children:e.jsx("h4",{children:"Best Brewing Method"})}),e.jsx("div",{className:"brew-methods",children:n.slice(0,1).map((r,d)=>e.jsxs("div",{className:"brew-method",children:[e.jsx("h5",{children:r.method}),e.jsxs("div",{className:"brew-quick-info",children:[e.jsx("div",{className:"quick-spec",children:e.jsx("strong",{children:r.temperature})}),e.jsx("div",{className:"quick-spec",children:e.jsx("strong",{children:r.ratio})}),e.jsx("div",{className:"quick-spec",children:e.jsx("strong",{children:r.brewTime})})]}),e.jsxs("div",{className:"best-for-note",children:["Perfect for ",r.grindSize.toLowerCase()," grind"]})]},d))})]})]})},Rs=({product:s,onAddToCart:l})=>e.jsxs("div",{className:"macro-product-card cursor-hover",children:[s.isPopular&&e.jsxs("div",{className:"popular-badge",children:[e.jsx(R,{size:14}),"Popular"]}),e.jsx(re,{className:"product-steam",children:e.jsxs("div",{className:"macro-image-container",children:[e.jsxs("div",{className:"macro-background",children:[e.jsx("div",{className:"coffee-texture"}),e.jsx("div",{className:"coffee-beans-scatter"})]}),e.jsx("div",{className:"product-image-main",children:e.jsx("span",{className:"product-emoji",children:s.image})}),e.jsxs("div",{className:"macro-details",children:[e.jsx("div",{className:"texture-overlay"}),e.jsx("div",{className:"grain-pattern"})]})]})}),e.jsxs("div",{className:"product-info-enhanced",children:[e.jsx("h3",{className:"product-name",children:s.name}),e.jsx("p",{className:"product-description",children:s.description}),e.jsxs("div",{className:"product-rating",children:[e.jsx("div",{className:"stars",children:[...Array(5)].map((o,g)=>e.jsx(R,{size:16,className:g<Math.floor(s.rating)?"star-filled":"star-empty"},g))}),e.jsx("span",{className:"rating-text",children:s.rating})]}),e.jsx("div",{className:"product-actions",children:e.jsx(Ls,{productName:s.name,productType:s.name.toLowerCase().includes("espresso")?"espresso":s.name.toLowerCase().includes("dark")?"dark":s.name.toLowerCase().includes("light")?"light":"medium"})}),e.jsxs("div",{className:"product-footer-enhanced",children:[e.jsx("span",{className:"product-price",children:s.price}),e.jsx(re,{className:"button-steam",children:e.jsx("button",{className:"add-btn-enhanced cursor-hover",onClick:l,children:e.jsx(Y,{size:16})})})]})]})]}),Us=()=>{const s=[];return e.jsx(_e,{className:"featured-products section coffee-texture",speed:.3,children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header text-center",children:[e.jsx("h2",{children:"Our Featured Favorites"}),e.jsx("p",{children:"Discover our most beloved coffee creations, crafted to perfection"})]}),e.jsx("div",{className:"products-grid grid grid-4",children:s.map(l=>e.jsx(Rs,{product:l,onAddToCart:()=>console.log(`Added ${l.name} to cart`)},l.id))}),e.jsx("div",{className:"text-center",style:{marginTop:"40px"},children:e.jsx("a",{href:"/menu",className:"btn btn-secondary cursor-hover",children:"View Full Menu"})})]})})},Bs=()=>{const s=[{icon:e.jsx(ts,{size:48}),title:"Premium Quality",description:"Sourced from the finest coffee farms worldwide, ensuring exceptional taste in every cup."},{icon:e.jsx(le,{size:48}),title:"Expert Baristas",description:"Our skilled baristas are passionate about creating the perfect coffee experience for you."},{icon:e.jsx(Fe,{size:48}),title:"Sustainable Sourcing",description:"We work directly with farmers to ensure fair trade and sustainable coffee production."},{icon:e.jsx(Ae,{size:48}),title:"Community Focus",description:"Building connections and creating a warm, welcoming space for coffee lovers to gather."}];return e.jsx(_e,{className:"about-section section coffee-farm",speed:.4,children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-text",children:[e.jsx("h2",{children:"Why Choose EzDevs Coffee?"}),e.jsx("p",{children:"Since 2024, EzDevs Coffee has been committed to delivering exceptional coffee experiences. We believe that great coffee brings people together, creates moments of joy, and fuels the spirit of community."}),e.jsx("p",{children:"Our journey began with a simple mission: to serve the best coffee while creating meaningful connections with our customers. Today, we're proud to be part of your daily routine, special celebrations, and everything in between."}),e.jsx(re,{className:"button-steam",children:e.jsx("a",{href:"/about",className:"btn btn-cta cursor-hover",children:"Learn Our Story"})})]}),e.jsx("div",{className:"features-grid",children:s.map((l,o)=>e.jsx(re,{className:"feature-steam",children:e.jsxs("div",{className:"feature-card cursor-hover",children:[e.jsx("div",{className:"feature-icon",children:l.icon}),e.jsx("h3",{children:l.title}),e.jsx("p",{children:l.description})]})},o))})]})})})},Hs=()=>{const[s,l]=x.useState(0),[o,g]=x.useState(!0),a=[{id:1,name:"Maria Santos",role:"Marketing Director",company:"TechCorp Philippines",content:"EzDevs Coffee has become my daily ritual. The quality is consistently excellent, and the atmosphere is perfect for both work and relaxation. Their subscription service ensures I never run out of my favorite blend!",rating:5,avatar:"ðŸ‘©â€ðŸ’¼",location:"Makati, Metro Manila",date:"2 weeks ago"},{id:2,name:"John Rivera",role:"Coffee Enthusiast",company:"Freelance Designer",content:"As a coffee connoisseur, I can confidently say EzDevs Coffee serves some of the best brews in the city. Their attention to detail is remarkable - from bean selection to the final cup.",rating:5,avatar:"ðŸ‘¨â€ðŸ’»",location:"Quezon City",date:"1 week ago"},{id:3,name:"Sarah Lee",role:"Business Owner",company:"Bloom Boutique",content:"I love bringing clients here for meetings. The professional yet cozy environment and exceptional service never disappoint. Plus, their pastries are amazing!",rating:5,avatar:"ðŸ‘©â€ðŸŽ“",location:"BGC, Taguig",date:"3 days ago"},{id:4,name:"Miguel Rodriguez",role:"Software Engineer",company:"StartupHub Inc.",content:"Perfect place for remote work! Fast WiFi, comfortable seating, and the best coffee to fuel long coding sessions. The staff is super friendly too.",rating:5,avatar:"ðŸ‘¨â€ðŸš€",location:"Cebu City",date:"5 days ago"},{id:5,name:"Anna Cruz",role:"University Student",company:"UP Diliman",content:"As a student, I appreciate the study-friendly environment and affordable prices. The iced caramel macchiato is my go-to during exam weeks!",rating:5,avatar:"ðŸ‘©â€ðŸŽ“",location:"Quezon City",date:"1 week ago"}],n=()=>{l(v=>(v+1)%a.length)},r=()=>{l(v=>(v-1+a.length)%a.length)};x.useEffect(()=>{if(!o)return;const v=setInterval(()=>{n()},5e3);return()=>clearInterval(v)},[o,s]);const d=()=>g(!1),c=()=>g(!0);return e.jsxs("div",{className:"testimonial-carousel",onMouseEnter:d,onMouseLeave:c,children:[e.jsxs("div",{className:"carousel-header",children:[e.jsxs("div",{className:"header-badge",children:[e.jsx("span",{className:"badge-icon",children:"â­"}),e.jsx("span",{className:"badge-text",children:"Customer Reviews"})]}),e.jsx("h2",{children:"What Our Coffee Lovers Say"}),e.jsx("p",{children:"Discover why thousands choose EzDevs Coffee for their daily brew"}),e.jsxs("div",{className:"testimonial-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:"4.9"}),e.jsx("span",{className:"stat-label",children:"Average Rating"})]}),e.jsx("div",{className:"stat-divider",children:"â€¢"}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:"2,000+"}),e.jsx("span",{className:"stat-label",children:"Happy Customers"})]}),e.jsx("div",{className:"stat-divider",children:"â€¢"}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:"50+"}),e.jsx("span",{className:"stat-label",children:"Daily Reviews"})]})]})]}),e.jsxs("div",{className:"carousel-container",children:[e.jsx("button",{className:"carousel-btn prev-btn",onClick:r,"aria-label":"Previous testimonial",children:e.jsx(ns,{size:24})}),e.jsx("div",{className:"testimonial-display",children:e.jsx("div",{className:"testimonials-track",style:{transform:`translateX(-${s*100}%)`},children:a.map(v=>e.jsx("div",{className:"testimonial-slide",children:e.jsxs("div",{className:"testimonial-card",children:[e.jsx("div",{className:"quote-decoration",children:e.jsx(js,{size:32})}),e.jsx("div",{className:"testimonial-rating",children:[...Array(5)].map((j,i)=>e.jsx(R,{size:18,className:i<v.rating?"star-filled":"star-empty"},i))}),e.jsxs("blockquote",{className:"testimonial-content",children:['"',v.content,'"']}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("div",{className:"author-avatar",children:e.jsx("span",{className:"avatar-emoji",children:v.avatar})}),e.jsxs("div",{className:"author-details",children:[e.jsx("h4",{className:"author-name",children:v.name}),e.jsxs("p",{className:"author-role",children:[v.role,v.company&&e.jsxs("span",{className:"author-company",children:[" â€¢ ",v.company]})]}),e.jsxs("div",{className:"author-meta",children:[e.jsx("span",{className:"location",children:v.location}),e.jsx("span",{className:"date",children:v.date})]})]})]})]})},v.id))})}),e.jsx("button",{className:"carousel-btn next-btn",onClick:n,"aria-label":"Next testimonial",children:e.jsx(cs,{size:24})})]}),e.jsx("div",{className:"carousel-indicators",children:a.map((v,j)=>e.jsx("button",{className:`indicator ${s===j?"active":""}`,onClick:()=>l(j),"aria-label":`Go to testimonial ${j+1}`},j))}),e.jsx("div",{className:"carousel-progress",children:e.jsx("div",{className:"progress-bar",style:{width:o?"100%":"0%",animationDuration:o?"5s":"0s"}})})]})},Vs=()=>e.jsxs("div",{className:"home-page",children:[e.jsx($s,{}),e.jsx(Us,{}),e.jsx("section",{className:"order-now-cta section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"cta-content",children:[e.jsxs("div",{className:"cta-text",children:[e.jsx("h2",{children:"Ready to Order?"}),e.jsx("p",{children:"Explore our full menu and place your order now. Fresh coffee, delivered with love."})]}),e.jsxs("div",{className:"cta-actions",children:[e.jsxs(A,{to:"/menu",className:"order-now-btn",children:[e.jsx(ue,{size:20}),"Order Now"]}),e.jsxs(A,{to:"/menu",className:"browse-menu-btn",children:[e.jsx(X,{size:20}),"Browse Menu"]})]})]})})}),e.jsx("div",{className:"coffee-process-section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"coffee-process-content",children:[e.jsx("h2",{children:"The Art of Perfect Brewing"}),e.jsx("p",{children:"From bean to cup, discover the passion behind every brew"}),e.jsxs("div",{className:"brewing-steps",children:[e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"step-icon",children:"ðŸŒ±"}),e.jsx("h4",{children:"Premium Beans"}),e.jsx("p",{children:"Sourced from the finest coffee regions worldwide"})]}),e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"step-icon",children:"âš™ï¸"}),e.jsx("h4",{children:"Expert Roasting"}),e.jsx("p",{children:"Carefully roasted to bring out unique flavors"})]}),e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"step-icon",children:"â˜•"}),e.jsx("h4",{children:"Perfect Brewing"}),e.jsx("p",{children:"Brewed with precision and served with love"})]})]})]})})}),e.jsx(Bs,{}),e.jsx(Hs,{})]}),Le=({item:s,selectedSize:l,onSizeChange:o,disabled:g=!1})=>{const a=zs(s);return a.length===0?e.jsx("div",{className:"size-selector no-sizes",children:e.jsx("div",{className:"single-price",children:be(s.base_price)})}):e.jsxs("div",{className:"size-selector",children:[e.jsx("div",{className:"size-selector-label",children:e.jsx("span",{children:"Size:"})}),e.jsx("div",{className:"size-options",children:a.map(n=>{const r=l===n.size;return e.jsxs("button",{type:"button",className:`size-option ${r?"selected":""} ${g?"disabled":""}`,onClick:()=>!g&&o(n.size,n.price),disabled:g,children:[e.jsx("div",{className:"size-name",children:n.size}),e.jsx("div",{className:"size-price",children:be(n.price)})]},n.size)})}),l&&e.jsx("div",{className:"selected-size-info",children:e.jsxs("span",{children:["Selected: ",l]})})]})},Js=s=>{const l=typeof s.price=="string"?parseFloat(s.price.replace("â‚±","")):s.price;return{id:s.id.toString(),name:s.name,base_price:l,sizes:s.sizes?.map(o=>({size:o.name,price:o.price,available:!0}))||[]}},Ws=({product:s,isOpen:l,onClose:o,onAddToCart:g})=>{const[a,n]=x.useState(1),[r,d]=x.useState(s.sizes?.[0]?.name||"");if(!l)return null;const c=Js(s),v=s.sizes?.find(p=>p.name===r)?.price||c.base_price,j=v*a,i=()=>{g(s,a,r),o()};return e.jsx("div",{className:"quick-view-overlay",onClick:o,children:e.jsxs("div",{className:"quick-view-modal",onClick:p=>p.stopPropagation(),children:[e.jsx("button",{className:"quick-view-close",onClick:o,"aria-label":"Close quick view",children:e.jsx(K,{size:20})}),e.jsxs("div",{className:"quick-view-content",children:[e.jsx("div",{className:"product-image-section",children:e.jsxs("div",{className:"product-image-container",children:[s.isPopular&&e.jsxs("div",{className:"popular-badge",children:[e.jsx(R,{size:14}),"Popular"]}),e.jsxs("div",{className:"product-main-image",children:[s.image&&(s.image.startsWith("http")||s.image.startsWith("data:image"))?e.jsx("img",{src:s.image,alt:s.name,className:"product-image",onError:p=>{p.currentTarget.style.display="none",p.currentTarget.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:"product-emoji-fallback",style:{display:s.image&&(s.image.startsWith("http")||s.image.startsWith("data:image"))?"none":"flex"},children:s.image||"â˜•"})]}),e.jsx("div",{className:"product-category-badge",children:s.category})]})}),e.jsxs("div",{className:"product-info-section",children:[e.jsxs("div",{className:"product-header",children:[e.jsx("h2",{className:"product-name",children:s.name}),e.jsxs("div",{className:"product-rating",children:[e.jsx("div",{className:"stars",children:[...Array(5)].map((p,C)=>e.jsx(R,{size:16,className:C<Math.floor(s.rating)?"star-filled":"star-empty"},C))}),e.jsxs("span",{className:"rating-text",children:["(",s.rating,")"]})]})]}),e.jsx("p",{className:"product-description",children:s.description}),e.jsx(Le,{item:c,selectedSize:r,onSizeChange:(p,C)=>d(p)}),e.jsxs("div",{className:"product-details",children:[s.allergens&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h5",{children:"Allergens:"}),e.jsx("p",{children:s.allergens.join(", ")})]}),s.brewingNotes&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h5",{children:"Tasting Notes:"}),e.jsx("p",{children:s.brewingNotes})]})]})]})]}),e.jsxs("div",{className:"quick-view-footer",children:[e.jsxs("div",{className:"price-section",children:[e.jsxs("div",{className:"unit-price",children:["â‚±",v.toFixed(2)," each"]}),e.jsxs("div",{className:"total-price",children:["Total: â‚±",j.toFixed(2)]})]}),e.jsxs("div",{className:"quantity-section",children:[e.jsx("label",{htmlFor:"quantity",children:"Qty:"}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>n(Math.max(1,a-1)),disabled:a<=1,children:e.jsx(ie,{size:16})}),e.jsx("input",{id:"quantity",type:"number",value:a,onChange:p=>n(Math.max(1,parseInt(p.target.value)||1)),min:"1",max:"99"}),e.jsx("button",{onClick:()=>n(a+1),children:e.jsx(Y,{size:16})})]})]}),e.jsxs("button",{className:"add-to-cart-btn",onClick:i,children:[e.jsx(Z,{size:18}),"Add to Cart"]})]})]})})},Zs=({items:s,onUpdateQuantity:l,onRemoveItem:o,onClose:g})=>{const a=s.reduce((r,d)=>r+d.quantity,0),n=s.reduce((r,d)=>r+d.price*d.quantity,0);return e.jsx("div",{className:"cart-preview-overlay",onClick:g,children:e.jsxs("div",{className:"cart-preview-panel",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"cart-preview-header",children:[e.jsxs("h3",{children:[e.jsx(ue,{size:20}),"Your Cart (",a," items)"]}),e.jsx("button",{className:"close-btn",onClick:g,children:e.jsx(K,{size:20})})]}),e.jsx("div",{className:"cart-preview-content",children:s.length===0?e.jsxs("div",{className:"empty-cart-preview",children:[e.jsx(ue,{size:48}),e.jsx("h4",{children:"Your cart is empty"}),e.jsx("p",{children:"Add some delicious coffee to get started!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cart-preview-items",children:s.map(r=>e.jsxs("div",{className:"cart-preview-item",children:[e.jsx("div",{className:"item-image",children:r.image&&r.image.startsWith("http")?e.jsx("img",{src:r.image,alt:r.name}):r.image&&r.image.startsWith("data:image")?e.jsx("img",{src:r.image,alt:r.name}):e.jsx("span",{className:"item-emoji",children:r.image})}),e.jsxs("div",{className:"item-details",children:[e.jsx("h4",{children:r.name}),r.size&&e.jsx("span",{className:"item-size",children:r.size}),e.jsxs("div",{className:"item-price",children:["â‚±",r.price.toFixed(2)]})]}),e.jsxs("div",{className:"item-controls",children:[e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>l(r.id,Math.max(0,r.quantity-1)),className:"qty-btn",children:e.jsx(ie,{size:12})}),e.jsx("span",{className:"quantity",children:r.quantity}),e.jsx("button",{onClick:()=>l(r.id,r.quantity+1),className:"qty-btn",children:e.jsx(Y,{size:12})})]}),e.jsx("button",{className:"remove-btn",onClick:()=>o(r.id),children:e.jsx(oe,{size:14})})]})]},`${r.id}-${r.size||"default"}`))}),e.jsx("div",{className:"cart-preview-summary",children:e.jsxs("div",{className:"subtotal",children:[e.jsx("span",{children:"Total:"}),e.jsxs("strong",{children:["â‚±",n.toFixed(2)]})]})})]})}),s.length>0&&e.jsxs("div",{className:"cart-preview-footer",children:[e.jsx("button",{className:"btn-continue",onClick:g,children:"Continue Shopping"}),e.jsx("button",{className:"btn-checkout",onClick:()=>window.location.href="/cart",children:"View Full Cart"})]})]})})},Gs=({cart:s})=>{const[l,o]=x.useState("all"),[g,a]=x.useState(null),[n,r]=x.useState(!1),d=[],[c,v]=x.useState(d);x.useEffect(()=>{const t=setTimeout(async()=>{console.log("ðŸ½ï¸ Attempting background database fetch...");try{const{data:m,error:N}=await S.from("menu_items").select(`
            *,
            menu_categories (
              name
            )
          `).eq("is_available",!0).order("created_at",{ascending:!1});if(N)throw N;if(m&&m.length>0){console.log("âœ… Background fetch successful, updating menu items:",m.length);const w=m.map(b=>({id:b.id,name:b.name,description:b.description,price:`â‚±${b.base_price}`,base_price:b.base_price,category:j(b.menu_categories?.name||"Coffee"),rating:4.5,isPopular:b.is_featured,image:b.image_url||i(b.menu_categories?.name||"Coffee"),sizes:p(b.base_price),ingredients:b.tags||["Fresh ingredients"],allergens:b.allergens||["None"],brewingNotes:b.description||`Expertly crafted ${b.name.toLowerCase()} with premium ingredients.`}));v(w)}}catch(m){console.log("âš ï¸ Background fetch failed (keeping static menu):",m.message)}},100);return()=>clearTimeout(t)},[]);const j=t=>({Coffee:"coffee",Tea:"tea",Pastries:"pastries",Sandwiches:"sandwiches",Pasta:"pasta",Salads:"salads",Breakfast:"breakfast",Snacks:"snacks",Beverages:"beverages",Desserts:"desserts"})[t]||"coffee",i=t=>({"Hot Coffee":"â˜•","Iced Coffee":"ðŸ§Š",Tea:"ðŸµ",Frappe:"ðŸ«",Specialty:"â­"})[t]||"â˜•",p=t=>[{id:"small",name:"Small",price:t},{id:"medium",name:"Medium",price:t+30},{id:"large",name:"Large",price:t+60},{id:"extra-large",name:"Extra Large",price:t+90}],C=c,E=[{id:"all",name:"All Items"},{id:"coffee",name:"Coffee"},{id:"tea",name:"Tea"},{id:"pastries",name:"Pastries"},{id:"sandwiches",name:"Sandwiches"},{id:"pasta",name:"Pasta"},{id:"salads",name:"Salads"},{id:"breakfast",name:"Breakfast"},{id:"snacks",name:"Snacks"},{id:"beverages",name:"Beverages"},{id:"desserts",name:"Desserts"}],h=l==="all"?C:C.filter(t=>t.category===l);return e.jsxs("div",{className:"menu-page",children:[e.jsx("section",{className:"menu-hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Our Menu"}),e.jsx("p",{children:"Discover our carefully crafted beverages made with premium ingredients"})]})}),e.jsx("section",{className:"menu-content section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"menu-header-section",children:[e.jsx("div",{className:"menu-filters",children:E.map(t=>e.jsx("button",{className:`filter-btn ${l===t.id?"active":""}`,onClick:()=>o(t.id),children:t.name},t.id))}),s&&s.items&&s.items.length>0&&e.jsxs("div",{className:"cart-actions",children:[e.jsxs("button",{className:"view-cart-btn",onClick:()=>r(!0),children:[e.jsx(ue,{size:18}),"View Cart (",s.items.reduce((t,m)=>t+m.quantity,0),")"]}),e.jsx("a",{href:"/cart",className:"checkout-cart-btn",children:"ðŸ›’ Proceed to Checkout"})]})]}),e.jsx("div",{className:"menu-grid grid grid-3",children:h.map(t=>e.jsxs("div",{className:"menu-item",children:[t.isPopular&&e.jsxs("div",{className:"popular-badge",children:[e.jsx(R,{size:14}),"Popular"]}),e.jsxs("div",{className:"menu-item-image",children:[t.image&&(t.image.startsWith("http")||t.image.startsWith("data:image"))?e.jsx("img",{src:t.image,alt:t.name,className:"menu-item-img",onError:m=>{m.currentTarget.style.display="none",m.currentTarget.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:"menu-emoji-fallback",style:{display:t.image&&(t.image.startsWith("http")||t.image.startsWith("data:image"))?"none":"flex"},children:t.image||"â˜•"})]}),e.jsxs("div",{className:"menu-item-info",children:[e.jsx("h3",{className:"menu-item-name",children:t.name}),e.jsx("p",{className:"menu-item-description",children:t.description}),e.jsxs("div",{className:"menu-item-footer",children:[e.jsx("div",{className:"price-section",children:e.jsx("span",{className:"menu-item-price",children:t.price})}),e.jsxs("div",{className:"item-buttons",children:[e.jsxs("button",{className:"quick-view-btn",onClick:()=>a(t),title:"Quick View",children:[e.jsx(xe,{size:16}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{className:"add-to-cart-btn",onClick:()=>a(t),title:"Customize & Add to Cart",children:[e.jsx(Z,{size:16}),e.jsx("span",{children:"Customize & Add"})]})]})]})]})]},t.id))})]})}),g&&e.jsx(Ws,{product:g,isOpen:!0,onClose:()=>a(null),onAddToCart:(t,m,N)=>{s?.addItem(t,m,N).catch(w=>console.error("Error adding item:",w))}}),n&&s&&e.jsx(Zs,{items:s.items||[],onUpdateQuantity:s.updateQuantity,onRemoveItem:s.removeItem,onClose:()=>r(!1)})]})},Ys=()=>{const s=[{icon:e.jsx(X,{size:48}),title:"Quality First",description:"We source only the finest beans and use expert roasting techniques to ensure every cup meets our high standards."},{icon:e.jsx(le,{size:48}),title:"Community",description:"Building meaningful connections with our customers and creating a space where everyone feels welcome."},{icon:e.jsx(Fe,{size:48}),title:"Sustainability",description:"Committed to ethical sourcing and environmental responsibility in everything we do."},{icon:e.jsx(Ae,{size:48}),title:"Passion",description:"Our love for coffee drives us to continuously improve and innovate in every aspect of our business."}],l=[{year:"2024",title:"Founded",description:"EzDevs Coffee was established with a vision to serve premium coffee"},{year:"2010",title:"Expansion",description:"Opened our 10th location across the Philippines"},{year:"2015",title:"Innovation",description:"Launched our signature blend and specialty drinks menu"},{year:"2020",title:"Digital Growth",description:"Expanded online presence and delivery services"},{year:"2024",title:"100+ Stores",description:"Reached over 100 locations nationwide"}];return e.jsxs("div",{className:"about-page",children:[e.jsx("section",{className:"about-hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Our Story"}),e.jsx("p",{children:"Crafting exceptional coffee experiences since 2007"})]})}),e.jsx("section",{className:"about-story section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"story-content",children:[e.jsxs("div",{className:"story-text",children:[e.jsx("h2",{children:"The Beginning"}),e.jsx("p",{children:"EzDevs Coffee started as a simple dream to create the perfect coffee experience. Founded in 2007, our journey began with a passion for quality coffee and a commitment to creating spaces where people could connect, work, and relax."}),e.jsx("p",{children:"What began as a single store has grown into a beloved coffee chain across the Philippines, but our core values remain the same: exceptional quality, warm hospitality, and genuine care for our community."})]}),e.jsx("div",{className:"story-image",children:e.jsx("div",{className:"image-placeholder",children:e.jsx(X,{size:120})})})]})})}),e.jsx("section",{className:"values-section section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header text-center",children:[e.jsx("h2",{children:"Our Values"}),e.jsx("p",{children:"The principles that guide everything we do"})]}),e.jsx("div",{className:"values-grid grid grid-4",children:s.map((o,g)=>e.jsxs("div",{className:"value-card",children:[e.jsx("div",{className:"value-icon",children:o.icon}),e.jsx("h3",{children:o.title}),e.jsx("p",{children:o.description})]},g))})]})}),e.jsx("section",{className:"timeline-section section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header text-center",children:[e.jsx("h2",{children:"Our Journey"}),e.jsx("p",{children:"Key milestones in our coffee story"})]}),e.jsx("div",{className:"timeline",children:l.map((o,g)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-year",children:o.year}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h3",{children:o.title}),e.jsx("p",{children:o.description})]})]},g))})]})})]})},Qs=()=>{const[s,l]=x.useState({name:"",email:"",subject:"",message:""}),o=n=>{l({...s,[n.target.name]:n.target.value})},g=n=>{n.preventDefault(),console.log("Form submitted:",s),alert("Thank you for your message! We'll get back to you soon."),l({name:"",email:"",subject:"",message:""})},a=[{name:"BGC Branch",address:"123 Coffee Street, Bonifacio Global City, Taguig",phone:"+63 2 8123 4567",hours:"6:00 AM - 10:00 PM"},{name:"Makati Branch",address:"456 Business Ave, Makati City",phone:"+63 2 8765 4321",hours:"6:00 AM - 11:00 PM"},{name:"Ortigas Branch",address:"789 Corporate Blvd, Pasig City",phone:"+63 2 8555 0123",hours:"6:30 AM - 9:30 PM"}];return e.jsxs("div",{className:"contact-page",children:[e.jsx("section",{className:"contact-hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Get In Touch"}),e.jsx("p",{children:"We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]})}),e.jsx("section",{className:"contact-content section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"contact-grid",children:[e.jsxs("div",{className:"contact-form-section",children:[e.jsx("h2",{children:"Send us a Message"}),e.jsxs("form",{onSubmit:g,className:"contact-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Your Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"subject",children:"Subject"}),e.jsx("input",{type:"text",id:"subject",name:"subject",value:s.subject,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"message",children:"Message"}),e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:o,rows:6,required:!0})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary submit-btn",children:[e.jsx(gs,{size:20}),"Send Message"]})]})]}),e.jsxs("div",{className:"contact-info-section",children:[e.jsx("h2",{children:"Contact Information"}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon",children:e.jsx(pe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Email"}),e.jsx("p",{children:"contact@ezdevscoffee.com"}),e.jsx("p",{children:"support@ezdevscoffee.com"})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon",children:e.jsx(he,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Phone"}),e.jsx("p",{children:"+63 2 8123 4567"}),e.jsx("p",{children:"+63 917 123 4567"})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon",children:e.jsx(Q,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Customer Service Hours"}),e.jsx("p",{children:"Monday - Friday: 8:00 AM - 8:00 PM"}),e.jsx("p",{children:"Saturday - Sunday: 9:00 AM - 6:00 PM"})]})]})]})]})]})})}),e.jsx("section",{className:"locations-section section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header text-center",children:[e.jsx("h2",{children:"Our Locations"}),e.jsx("p",{children:"Visit us at any of our convenient locations"})]}),e.jsx("div",{className:"locations-grid grid grid-3",children:a.map((n,r)=>e.jsxs("div",{className:"location-card",children:[e.jsx("h3",{children:n.name}),e.jsxs("div",{className:"location-info",children:[e.jsxs("div",{className:"location-item",children:[e.jsx(we,{size:18}),e.jsx("span",{children:n.address})]}),e.jsxs("div",{className:"location-item",children:[e.jsx(he,{size:18}),e.jsx("span",{children:n.phone})]}),e.jsxs("div",{className:"location-item",children:[e.jsx(Q,{size:18}),e.jsx("span",{children:n.hours})]})]})]},r))})]})})]})},Xs=({cartTotal:s=0,onShippingSelect:l,className:o=""})=>{const[g,a]=x.useState(""),[n,r]=x.useState([]),[d,c]=x.useState(""),[v,j]=x.useState(!1),[i,p]=x.useState(""),C=b=>/^\d{4}$/.test(b),E=b=>{const k=h(b),q=[{id:"standard",name:"Standard Delivery",price:k==="metro-manila"?0:50,estimatedDays:k==="metro-manila"?"1-2 days":"3-5 days",description:"Regular delivery during business hours",icon:"ðŸ“¦"},{id:"express",name:"Express Delivery",price:k==="metro-manila"?100:150,estimatedDays:k==="metro-manila"?"Same day":"1-2 days",description:"Priority handling and faster delivery",icon:"ðŸš€"},{id:"overnight",name:"Overnight Express",price:k==="metro-manila"?200:300,estimatedDays:"Next day",description:"Guaranteed next business day delivery",icon:"âš¡"}];return s>=1e3&&(q[0].price=0,q[0].description="FREE shipping on orders over â‚±1000!"),k==="remote"&&q.forEach($=>{$.price+=100,$.estimatedDays=$.estimatedDays.includes("day")?$.estimatedDays.replace(/\d+/,T=>String(parseInt(T)+2)):"5-7 days"}),q},h=b=>{const k=parseInt(b);return k>=1e3&&k<=1799?"metro-manila":k>=1800&&k<=3999?"luzon":k>=6e3&&k<=7999?"visayas":k>=8e3&&k<=9999?"mindanao":"remote"},t=b=>{switch(b){case"metro-manila":return"Metro Manila";case"luzon":return"Luzon";case"visayas":return"Visayas";case"mindanao":return"Mindanao";case"remote":return"Remote Area";default:return"Unknown Area"}};x.useEffect(()=>{if(g&&C(g)){j(!0),p("");const b=setTimeout(()=>{const k=E(g);r(k),c(k[0].id),j(!1)},800);return()=>clearTimeout(b)}else r([]),c(""),p("")},[g,s]);const m=b=>{const k=b.target.value.replace(/\D/g,"").slice(0,4);a(k),k&&!C(k)&&k.length===4?p("Please enter a valid Philippine ZIP code"):p("")},N=b=>{c(b.id),l?.(b)},w=g&&C(g)?h(g):"";return e.jsxs("div",{className:`shipping-calculator ${o}`,children:[e.jsxs("div",{className:"calculator-header",children:[e.jsx("div",{className:"header-icon",children:e.jsx(Pe,{size:20})}),e.jsx("h3",{children:"Calculate Shipping"})]}),e.jsxs("div",{className:"zip-input-section",children:[e.jsxs("div",{className:"input-group",children:[e.jsx(we,{size:18,className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Enter ZIP code (e.g. 1234)",value:g,onChange:m,className:i?"error":""})]}),i&&e.jsx("div",{className:"error-message",children:i}),w&&!i&&e.jsx("div",{className:"area-info",children:e.jsx("span",{className:"area-badge",children:t(w)})})]}),v&&e.jsxs("div",{className:"loading-section",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Calculating shipping options..."})]}),n.length>0&&!v&&e.jsxs("div",{className:"shipping-options",children:[e.jsx("h4",{children:"Available Shipping Options:"}),e.jsx("div",{className:"options-list",children:n.map(b=>e.jsxs("label",{className:"shipping-option",children:[e.jsx("input",{type:"radio",name:"shipping",value:b.id,checked:d===b.id,onChange:()=>N(b)}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("span",{className:"option-icon",children:b.icon}),e.jsxs("div",{className:"option-info",children:[e.jsx("span",{className:"option-name",children:b.name}),e.jsx("span",{className:"option-price",children:b.price===0?"FREE":`â‚±${b.price}`})]}),e.jsxs("div",{className:"option-timing",children:[e.jsx(Q,{size:14}),e.jsx("span",{children:b.estimatedDays})]})]}),e.jsx("p",{className:"option-description",children:b.description})]})]},b.id))}),s<1e3&&e.jsxs("div",{className:"free-shipping-note",children:[e.jsx(ys,{size:16}),e.jsxs("span",{children:["Add â‚±",(1e3-s).toFixed(2)," more for FREE standard shipping!"]})]})]}),g&&C(g)&&n.length===0&&!v&&!i&&e.jsx("div",{className:"no-shipping",children:e.jsx("p",{children:"No shipping options available for this area. Please contact us for assistance."})})]})},Ks=({items:s,totalPrice:l,onConfirmOrder:o,onCancel:g})=>{const[a,n]=x.useState({name:"",email:"",phone:"",paymentMethod:"cash",notes:""}),[r,d]=x.useState(!1),[c,v]=x.useState(null),j=async i=>{i.preventDefault(),d(!0);try{const p=await o(a);p&&v(p)}catch(p){console.error("Error confirming order:",p),alert("Failed to confirm order. Please try again.")}finally{d(!1)}};return c?e.jsx("div",{className:"order-confirmation-modal",children:e.jsxs("div",{className:"order-success",children:[e.jsx("div",{className:"success-icon",children:e.jsx(me,{size:48})}),e.jsx("h2",{children:"Order Confirmed!"}),e.jsxs("div",{className:"order-number",children:["Order #",e.jsx("strong",{children:c})]}),e.jsx("p",{children:"Show this number to the cashier for processing"}),e.jsxs("div",{className:"order-summary",children:[e.jsx("h3",{children:"Your Order:"}),s.map((i,p)=>e.jsxs("div",{className:"order-item",children:[e.jsxs("span",{children:[i.name," ",i.size&&`(${i.size})`]}),e.jsxs("span",{children:["Ã—",i.quantity]}),e.jsxs("span",{children:["â‚±",(i.price*i.quantity).toFixed(2)]})]},p)),e.jsx("div",{className:"order-total",children:e.jsxs("strong",{children:["Total: â‚±",l.toFixed(2)]})})]}),e.jsxs("div",{className:"next-steps",children:[e.jsx("h4",{children:"Next Steps:"}),e.jsxs("div",{className:"step",children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Go to the counter"})]}),e.jsxs("div",{className:"step",children:[e.jsx(te,{size:16}),e.jsxs("span",{children:["Show order #",c," to cashier"]})]}),e.jsxs("div",{className:"step",children:[e.jsx(Ee,{size:16}),e.jsxs("span",{children:["Pay with ",a.paymentMethod]})]})]}),e.jsx("button",{className:"btn-done",onClick:()=>{v(null),g()},children:"Done"})]})}):e.jsx("div",{className:"order-confirmation-overlay",children:e.jsxs("div",{className:"order-confirmation-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Confirm Your Order"}),e.jsx("button",{className:"close-btn",onClick:g,children:"Ã—"})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"order-review",children:[e.jsx("h3",{children:"Order Summary"}),e.jsx("div",{className:"order-items",children:s.map((i,p)=>e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"item-image",children:i.image&&i.image.startsWith("http")?e.jsx("img",{src:i.image,alt:i.name}):e.jsx("span",{className:"item-emoji",children:i.image})}),e.jsxs("div",{className:"item-details",children:[e.jsx("div",{className:"item-name",children:i.name}),i.size&&e.jsx("div",{className:"item-size",children:i.size})]}),e.jsxs("div",{className:"item-quantity",children:["Ã—",i.quantity]}),e.jsxs("div",{className:"item-total",children:["â‚±",(i.price*i.quantity).toFixed(2)]})]},p))}),e.jsx("div",{className:"order-total",children:e.jsxs("strong",{children:["Total: â‚±",l.toFixed(2)]})})]}),e.jsxs("form",{onSubmit:j,className:"customer-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Your Information"}),e.jsxs("div",{className:"form-group required",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx(te,{size:16}),"Full Name"]}),e.jsx("input",{type:"text",id:"name",value:a.name,onChange:i=>n(p=>({...p,name:i.target.value})),placeholder:"Enter your name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx(pe,{size:16}),"Email (Optional)"]}),e.jsx("input",{type:"email",id:"email",value:a.email,onChange:i=>n(p=>({...p,email:i.target.value})),placeholder:"your.email@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"phone",children:[e.jsx(he,{size:16}),"Phone (Optional)"]}),e.jsx("input",{type:"tel",id:"phone",value:a.phone,onChange:i=>n(p=>({...p,phone:i.target.value})),placeholder:"+63 xxx xxx xxxx"})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Payment Method"}),e.jsxs("div",{className:"payment-methods",children:[e.jsxs("label",{className:`payment-option ${a.paymentMethod==="cash"?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"payment",value:"cash",checked:a.paymentMethod==="cash",onChange:i=>n(p=>({...p,paymentMethod:i.target.value}))}),e.jsxs("div",{className:"payment-content",children:[e.jsx(rs,{size:20}),e.jsx("span",{children:"Cash"})]})]}),e.jsxs("label",{className:`payment-option ${a.paymentMethod==="card"?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"payment",value:"card",checked:a.paymentMethod==="card",onChange:i=>n(p=>({...p,paymentMethod:i.target.value}))}),e.jsxs("div",{className:"payment-content",children:[e.jsx(Ee,{size:20}),e.jsx("span",{children:"Card"})]})]}),e.jsxs("label",{className:`payment-option ${a.paymentMethod==="gcash"?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"payment",value:"gcash",checked:a.paymentMethod==="gcash",onChange:i=>n(p=>({...p,paymentMethod:i.target.value}))}),e.jsxs("div",{className:"payment-content",children:[e.jsx(fs,{size:20}),e.jsx("span",{children:"GCash"})]})]})]})]}),e.jsx("div",{className:"form-section",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"notes",children:"Special Instructions (Optional)"}),e.jsx("textarea",{id:"notes",value:a.notes,onChange:i=>n(p=>({...p,notes:i.target.value})),placeholder:"Any special requests or notes...",rows:3})]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-cancel",onClick:g,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-confirm",disabled:r||!a.name,children:r?"Processing...":"Confirm Order"})]})]})]})]})})},ea=({cart:s})=>{const[l,o]=ve.useState(null),[g,a]=ve.useState(!1),n=s.totalPrice+(l?.price||0),r=async d=>{try{console.log("ðŸ”„ Creating customer order...",d);const c=Ss(),{data:v,error:j}=await S.from("orders").insert([{order_number:c,customer_email:d.email||null,customer_name:d.name,total_amount:n,status:"pending",payment_method:d.paymentMethod,notes:d.notes||null}]).select().single();if(j)throw j;console.log("âœ… Order created:",v);const i=s.items.map(C=>({order_id:v.id,menu_item_id:C.id,menu_item_name:C.name,quantity:C.quantity,unit_price:C.price,total_price:C.price*C.quantity,special_instructions:C.size?`Size: ${C.size}`:null})),{error:p}=await S.from("order_items").insert(i);if(p)throw p;return console.log("âœ… Order items added"),setTimeout(()=>{s.clearCart()},2e3),c}catch(c){throw console.error("âŒ Error creating order:",c),c}};return s.items.length===0?e.jsx("div",{className:"cart-page",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"empty-cart-state",children:[e.jsx(Z,{size:64}),e.jsx("h2",{children:"Your Cart is Empty"}),e.jsx("p",{children:"Looks like you haven't added any delicious coffee to your cart yet."}),e.jsx(A,{to:"/menu",className:"btn btn-primary",children:"Browse Menu"})]})})}):e.jsxs("div",{className:"cart-page",children:[e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"cart-header",children:[e.jsxs(A,{to:"/menu",className:"back-link",children:[e.jsx(ss,{size:20}),"Continue Shopping"]}),e.jsxs("h1",{children:["Shopping Cart (",s.totalItems," items)"]})]}),e.jsxs("div",{className:"cart-layout",children:[e.jsx("div",{className:"cart-items-section",children:e.jsx("div",{className:"cart-items",children:s.items.map(d=>e.jsxs("div",{className:"cart-item",children:[e.jsx("div",{className:"item-image",children:e.jsx("span",{className:"item-emoji",children:d.image})}),e.jsxs("div",{className:"item-details",children:[e.jsx("h3",{children:d.name}),d.size&&e.jsx("span",{className:"item-size",children:d.size}),e.jsxs("div",{className:"item-price",children:["â‚±",d.price.toFixed(2)," each"]})]}),e.jsxs("div",{className:"item-controls",children:[e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>s.updateQuantity(d.id,Math.max(0,d.quantity-1)),children:e.jsx(ie,{size:16})}),e.jsx("span",{className:"quantity",children:d.quantity}),e.jsx("button",{onClick:()=>s.updateQuantity(d.id,d.quantity+1),children:e.jsx(Y,{size:16})})]}),e.jsxs("div",{className:"item-total",children:["â‚±",(d.price*d.quantity).toFixed(2)]}),e.jsx("button",{className:"remove-btn",onClick:()=>s.removeItem(d.id),children:e.jsx(oe,{size:16})})]})]},`${d.id}-${d.size}`))})}),e.jsxs("div",{className:"cart-summary-section",children:[e.jsxs("div",{className:"cart-summary",children:[e.jsx("h3",{children:"Order Summary"}),e.jsxs("div",{className:"summary-line",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["â‚±",s.totalPrice.toFixed(2)]})]}),l&&e.jsxs("div",{className:"summary-line",children:[e.jsxs("span",{children:["Shipping (",l.name,"):"]}),e.jsx("span",{children:l.price===0?"FREE":`â‚±${l.price.toFixed(2)}`})]}),e.jsxs("div",{className:"summary-total",children:[e.jsx("span",{children:"Total:"}),e.jsxs("strong",{children:["â‚±",n.toFixed(2)]})]}),e.jsxs("button",{className:"confirm-order-btn",onClick:()=>a(!0),children:[e.jsx(fe,{size:16}),"Confirm Order"]}),e.jsx("button",{className:"clear-cart-btn",onClick:s.clearCart,children:"Clear Cart"})]}),e.jsx(Xs,{cartTotal:s.totalPrice,onShippingSelect:o,className:"compact"})]})]})]}),g&&e.jsx(Ks,{items:s.items,totalPrice:n,onConfirmOrder:r,onCancel:()=>a(!1)})]})},sa=()=>{const[s,l]=x.useState([]),[o,g]=x.useState(!0),[a,n]=x.useState(null),{user:r}=ee();x.useEffect(()=>{d()},[r]);const d=async()=>{if(!r){g(!1);return}try{const{data:i,error:p}=await S.from("orders").select(`
          *,
          order_items (
            *,
            menu_items (
              name,
              image_url,
              icon
            )
          )
        `).eq("user_id",r.id).neq("status","draft").order("created_at",{ascending:!1});if(p)throw p;const C=i.map(E=>({id:E.id,order_number:E.order_number,order_date:E.created_at,status:E.status,total_amount:E.total_amount,items:E.order_items.map(h=>({id:h.id,name:h.menu_items.name,price:h.unit_price,quantity:h.quantity,image:h.menu_items.image_url||"â˜•",size:h.size}))}));l(C)}catch(i){console.error("Error fetching orders:",i)}finally{g(!1)}},c=i=>{switch(i){case"pending":return e.jsx(Q,{size:16,className:"status-icon pending"});case"preparing":return e.jsx(Ne,{size:16,className:"status-icon preparing"});case"ready":return e.jsx(fe,{size:16,className:"status-icon ready"});case"completed":return e.jsx(fe,{size:16,className:"status-icon completed"});case"cancelled":return e.jsx(ws,{size:16,className:"status-icon cancelled"});default:return e.jsx(Q,{size:16,className:"status-icon pending"})}},v=i=>{switch(i){case"pending":return"Order Received";case"preparing":return"Preparing";case"ready":return"Ready for Pickup";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return"Unknown"}},j=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o?e.jsx("div",{className:"orders-page",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading your orders..."})]})})}):e.jsxs("div",{className:"orders-page",children:[e.jsx("section",{className:"orders-hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"My Orders"}),e.jsx("p",{children:"Track your coffee orders and view order history"})]})}),e.jsx("section",{className:"orders-content section",children:e.jsx("div",{className:"container",children:s.length===0?e.jsxs("div",{className:"empty-orders",children:[e.jsx(Ne,{size:64}),e.jsx("h3",{children:"No orders yet"}),e.jsx("p",{children:"When you place your first order, it will appear here."}),e.jsx("a",{href:"/menu",className:"btn btn-primary",children:"Browse Menu"})]}):e.jsx("div",{className:"orders-grid",children:s.map(i=>e.jsxs("div",{className:"order-card",children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("h3",{children:["Order #",i.order_number]}),e.jsx("p",{className:"order-date",children:j(i.order_date)})]}),e.jsxs("div",{className:"order-status",children:[c(i.status),e.jsx("span",{className:`status-text ${i.status}`,children:v(i.status)})]})]}),e.jsx("div",{className:"order-items",children:i.items.map((p,C)=>e.jsxs("div",{className:"order-item",children:[e.jsx("div",{className:"item-image",children:p.image&&p.image.startsWith("http")?e.jsx("img",{src:p.image,alt:p.name}):p.image&&p.image.startsWith("data:image")?e.jsx("img",{src:p.image,alt:p.name}):e.jsx("span",{className:"item-emoji",children:p.image})}),e.jsxs("div",{className:"item-details",children:[e.jsx("h4",{children:p.name}),p.size&&e.jsx("span",{className:"item-size",children:p.size}),e.jsxs("div",{className:"item-meta",children:[e.jsxs("span",{className:"quantity",children:["Qty: ",p.quantity]}),e.jsxs("span",{className:"price",children:["â‚±",p.price.toFixed(2)]})]})]})]},C))}),e.jsxs("div",{className:"order-footer",children:[e.jsx("div",{className:"order-total",children:e.jsxs("strong",{children:["Total: â‚±",i.total_amount.toFixed(2)]})}),e.jsxs("button",{className:"view-details-btn",onClick:()=>n(i),children:[e.jsx(xe,{size:16}),"View Details"]})]})]},i.id))})})}),a&&e.jsx("div",{className:"order-modal-overlay",onClick:()=>n(null),children:e.jsxs("div",{className:"order-modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Order Details - #",a.order_number]}),e.jsx("button",{className:"close-btn",onClick:()=>n(null),children:"Ã—"})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"order-summary",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Order Date:"}),e.jsx("span",{children:j(a.order_date)})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Status:"}),e.jsxs("span",{className:`status-text ${a.status}`,children:[c(a.status),v(a.status)]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("strong",{children:["â‚±",a.total_amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"modal-items",children:[e.jsx("h4",{children:"Order Items"}),a.items.map((i,p)=>e.jsxs("div",{className:"modal-item",children:[e.jsx("div",{className:"item-image",children:i.image&&i.image.startsWith("http")?e.jsx("img",{src:i.image,alt:i.name}):i.image&&i.image.startsWith("data:image")?e.jsx("img",{src:i.image,alt:i.name}):e.jsx("span",{className:"item-emoji",children:i.image})}),e.jsxs("div",{className:"item-info",children:[e.jsx("h5",{children:i.name}),i.size&&e.jsx("span",{className:"item-size",children:i.size})]}),e.jsxs("div",{className:"item-pricing",children:[e.jsxs("span",{className:"quantity",children:["Ã—",i.quantity]}),e.jsxs("span",{className:"price",children:["â‚±",i.price.toFixed(2)]})]})]},p))]})]})]})})]})},aa=({sizes:s,basePrice:l,onSizesChange:o})=>{const[g,a]=x.useState(null),[n,r]=x.useState({size:"",price:l,available:!0}),c=["Small","Medium","Large","Extra Large"].filter(h=>!s.some(t=>t.size===h)),v=()=>{if(!n.size||n.price<=0)return;const h=[...s,{size:n.size,price:n.price,available:n.available}],t={Small:1,Medium:2,Large:3,"Extra Large":4};h.sort((m,N)=>t[m.size]-t[N.size]),o(h),C()},j=h=>{const t=s[h];a(h),r({size:t.size,price:t.price,available:t.available})},i=()=>{if(g===null)return;const h=s.map((t,m)=>m===g?{...t,price:n.price,available:n.available}:t);o(h),a(null),C()},p=h=>{const t=s.filter((m,N)=>N!==h);o(t)},C=()=>{r({size:"",price:l,available:!0}),a(null)},E=()=>{const h=[{size:"Small",price:l,available:!0},{size:"Medium",price:l+.75,available:!0},{size:"Large",price:l+1.5,available:!0},{size:"Extra Large",price:l+2.25,available:!0}];o(h)};return e.jsxs("div",{className:"admin-size-selector",children:[e.jsxs("div",{className:"size-selector-header",children:[e.jsx("h4",{children:"Size Options & Pricing"}),e.jsx("button",{type:"button",className:"generate-default-btn",onClick:E,title:"Generate default sizes with standard pricing",children:"Generate Default Sizes"})]}),e.jsx("div",{className:"current-sizes",children:s.length===0?e.jsx("div",{className:"no-sizes",children:e.jsx("p",{children:"No sizes configured. Item will use base price only."})}):e.jsx("div",{className:"sizes-grid",children:s.map((h,t)=>e.jsx("div",{className:"size-item",children:g===t?e.jsxs("div",{className:"size-edit-form",children:[e.jsxs("div",{className:"edit-form-row",children:[e.jsx("span",{className:"size-name",children:h.size}),e.jsx("input",{type:"number",step:"0.01",value:n.price,onChange:m=>r({...n,price:parseFloat(m.target.value)||0}),className:"price-input",min:"0"})]}),e.jsxs("div",{className:"edit-form-actions",children:[e.jsxs("label",{className:"availability-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.available,onChange:m=>r({...n,available:m.target.checked})}),"Available"]}),e.jsxs("div",{className:"edit-buttons",children:[e.jsx("button",{type:"button",className:"save-edit-btn",onClick:i,children:e.jsx(De,{size:14})}),e.jsx("button",{type:"button",className:"cancel-edit-btn",onClick:()=>{a(null),C()},children:e.jsx(K,{size:14})})]})]})]}):e.jsxs("div",{className:"size-display",children:[e.jsxs("div",{className:"size-info",children:[e.jsx("span",{className:"size-name",children:h.size}),e.jsx("span",{className:"size-price",children:be(h.price)}),e.jsx("span",{className:`size-status ${h.available?"available":"unavailable"}`,children:h.available?"Available":"Unavailable"})]}),e.jsxs("div",{className:"size-actions",children:[e.jsx("button",{type:"button",className:"edit-size-btn",onClick:()=>j(t),title:"Edit size",children:e.jsx(Te,{size:14})}),e.jsx("button",{type:"button",className:"delete-size-btn",onClick:()=>p(t),title:"Delete size",children:e.jsx(oe,{size:14})})]})]})},t))})}),c.length>0&&e.jsxs("div",{className:"add-size-section",children:[e.jsx("h5",{children:"Add New Size"}),e.jsxs("div",{className:"add-size-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("select",{value:n.size,onChange:h=>r({...n,size:h.target.value}),className:"size-select",children:[e.jsx("option",{value:"",children:"Select Size"}),c.map(h=>e.jsx("option",{value:h,children:h},h))]}),e.jsx("input",{type:"number",step:"0.01",value:n.price,onChange:h=>r({...n,price:parseFloat(h.target.value)||0}),placeholder:"Price",className:"price-input",min:"0"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("label",{className:"availability-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.available,onChange:h=>r({...n,available:h.target.checked})}),"Available"]}),e.jsxs("button",{type:"button",className:"add-size-btn",onClick:v,disabled:!n.size||n.price<=0,children:[e.jsx(Y,{size:16}),"Add Size"]})]})]})]}),e.jsxs("div",{className:"size-pricing-tips",children:[e.jsx("h5",{children:"ðŸ’¡ Pricing Tips"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Small: Base price ($",l.toFixed(2),")"]}),e.jsx("li",{children:"Medium: Usually +$0.50 to +$1.00"}),e.jsx("li",{children:"Large: Usually +$1.00 to +$2.00"}),e.jsx("li",{children:"Extra Large: Usually +$1.50 to +$3.00"})]})]})]})},ta=()=>{const[s,l]=x.useState([]),[o,g]=x.useState(!1),[a,n]=x.useState(null),[r,d]=x.useState(!1),[c,v]=x.useState({name:"",description:"",price:"",category:"coffee",image_url:"",icon:"â˜•",is_popular:!1,sizes:[]}),[j,i]=x.useState(null),[p,C]=x.useState(null),[E,h]=x.useState([{value:"coffee",label:"Coffee",id:null},{value:"espresso",label:"Espresso",id:null},{value:"cold",label:"Cold Drinks",id:null},{value:"food",label:"Food",id:null},{value:"pastries",label:"Pastries",id:null},{value:"seasonal",label:"Seasonal",id:null}]),t=["â˜•","ðŸ§Š","ðŸµ","ðŸ«","ðŸ¥","ðŸ§","ðŸª","ðŸ¥¯","ðŸ¥¨"];x.useEffect(()=>{N(),m();const y=S.channel("menu_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"menu_items"},_=>{console.log("ðŸ”„ Real-time: Menu item change detected:",_.eventType,_.new||_.old),setTimeout(()=>{N()},500)}).subscribe(_=>{console.log("ðŸ“¡ Real-time subscription status:",_)});return()=>{y.unsubscribe()}},[]);const m=async()=>{try{const{data:y,error:_}=await S.from("menu_categories").select("id, name").eq("is_active",!0).order("display_order");if(_){console.warn("âš ï¸ Could not fetch categories:",_);return}if(y&&y.length>0){const O=y.map(D=>({value:D.name.toLowerCase().replace(" ",""),label:D.name,id:D.id}));h(O)}}catch(y){console.warn("âš ï¸ Error fetching categories:",y)}},N=async(y=0)=>{try{if(console.log("ðŸ½ï¸ Menu Management: Fetching items from Supabase..."),y===0&&!await ke()){console.warn("âš ï¸ Menu Management: Connection test failed, using fallback");return}const{data:O,error:D}=await S.from("menu_items").select("*").order("created_at",{ascending:!1});if(D){if(console.warn("âš ï¸ Supabase fetch error:",D),y<2){console.log(`ðŸ”„ Retrying... (${y+1}/2)`),setTimeout(()=>N(y+1),2e3);return}console.log("âš ï¸ Menu Management: Max retries reached, keeping current state");return}console.log("âœ… Menu Management: Loaded data from Supabase:",O?.length||0,"items"),O&&O.length>0?(l(O),console.log("ðŸ“‹ Using database items:",O.length)):(console.log("ðŸ“ Database is empty - showing fallback items"),l([]))}catch(O){if(console.error("âŒ Menu Management: Fetch failed:",O),O.message?.includes("timeout")&&y<2){console.log(`ðŸ”„ Timeout, retrying... (${y+1}/2)`),setTimeout(()=>N(y+1),2e3);return}console.log("âš ï¸ Menu Management: Keeping current state due to network error")}},w=async y=>{y.preventDefault(),g(!0);try{let _=c.image_url;if(j){console.log("ðŸ–¼ï¸ Uploading selected image...");const f=await H(j);f?(_=f,console.log("âœ… Image URL ready:",_)):console.warn("âš ï¸ Failed to upload image. Item will be saved without image.")}const D=E.find(f=>f.value===c.category)?.id,V={name:c.name,description:c.description,base_price:parseFloat(c.price),category_id:D,image_url:_||null,is_available:!0,is_featured:c.is_popular,sizes:c.sizes.length>0?c.sizes:null};if(a){console.log("ðŸ”„ Updating item in Supabase:",c.name);const{data:f,error:I}=await S.from("menu_items").update(V).eq("id",a.id).select().single();if(I)throw I;console.log("âœ… Item updated in database:",f)}else{console.log("ðŸ”„ Adding new item to Supabase:",c.name);const{data:f,error:I}=await S.from("menu_items").insert([V]).select().single();if(I)throw I;console.log("âœ… New item added to database:",f),console.log("ðŸ“„ Full item data:",JSON.stringify(f,null,2))}setTimeout(()=>{console.log("ðŸ”„ Manual refresh after adding item..."),N()},1e3),q()}catch(_){console.error("âŒ Database operation failed:",_),alert(`Error ${a?"updating":"adding"} item: ${_.message}`);const O={name:c.name,description:c.description,base_price:parseFloat(c.price),category_id:selectedCategory?.id,image_url:imageUrl||null,is_available:!0,is_featured:c.is_popular,sizes:c.sizes.length>0?c.sizes:null},D=a?{...O,id:a.id,category_id:selectedCategory?.id||a.category_id,created_at:a.created_at,updated_at:new Date().toISOString()}:{...O,id:`temp_${Date.now()}`,category_id:selectedCategory?.id||E[0]?.id||"default",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),display_order:0};if(a){const V=s.map(f=>f.id===a.id?D:f);l(V)}else l([D,...s]);q()}finally{g(!1)}},b=y=>{n(y);const _=E.find(O=>O.id===y.category_id)?.value||"coffee";v({name:y.name,description:y.description,price:y.base_price.toString(),category:_,image_url:y.image_url||"",icon:"â˜•",is_popular:y.is_featured,sizes:y.sizes||[]}),d(!0)},k=async y=>{if(confirm(`Are you sure you want to delete "${y.name}"?`))try{console.log("ðŸ”„ Deleting item from Supabase:",y.name);const{error:_}=await S.from("menu_items").delete().eq("id",y.id);if(_)throw _;console.log("âœ… Item deleted from database:",y.name)}catch(_){console.error("âŒ Database deletion failed:",_),alert(`Error deleting item: ${_.message}`);const O=s.filter(D=>D.id!==y.id);l(O),console.log("âœ… Item deleted locally as fallback:",y.name)}},q=()=>{v({name:"",description:"",price:"",category:"coffee",image_url:"",icon:"â˜•",is_popular:!1,sizes:[]}),n(null),d(!1),i(null),C(null)},$=y=>{const _=y.target.files?.[0];if(_){if(!_.type.startsWith("image/")){alert("Please select a valid image file");return}if(_.size>5*1024*1024){alert("Image size should be less than 5MB");return}i(_);const O=new FileReader;O.onload=D=>{C(D.target?.result)},O.readAsDataURL(_)}},T=y=>new Promise((_,O)=>{const D=new FileReader;D.onload=()=>_(D.result),D.onerror=O,D.readAsDataURL(y)}),H=async y=>{try{console.log("ðŸ”„ Uploading image to Supabase storage...");const{data:_,error:O}=await S.storage.listBuckets();if(console.log("ðŸ“ Available buckets:",_?.map(P=>P.name)),O)return console.error("âŒ Error checking buckets:",O),console.log("ðŸ”„ Falling back to base64 storage..."),await T(y);if(!_?.find(P=>P.name==="menu-images"))return console.error('âŒ Storage bucket "menu-images" does not exist.'),console.log("ðŸ”„ Falling back to base64 storage..."),await T(y);const V=y.name.split(".").pop(),I=`menu-items/${`${Math.random().toString(36).substring(2)}-${Date.now()}.${V}`}`,{error:u}=await S.storage.from("menu-images").upload(I,y,{cacheControl:"3600",upsert:!1});if(u)return console.error("âŒ Image upload failed:",u),console.error("Error details:",u.message),console.log("ðŸ”„ Falling back to base64 storage..."),await T(y);const{data:M}=S.storage.from("menu-images").getPublicUrl(I);return console.log("âœ… Image uploaded successfully to Supabase Storage:",M.publicUrl),M.publicUrl}catch(_){console.error("âŒ Image upload error:",_),console.log("ðŸ”„ Falling back to base64 storage...");try{const O=await T(y);return console.log("âœ… Image converted to base64 successfully"),O}catch(O){return console.error("âŒ Base64 conversion failed:",O),alert(`Image processing failed: ${_.message||"Unknown error"}`),null}}},U=(y,_)=>{v(O=>({...O,[y]:_}))},ae=y=>{v(_=>({..._,sizes:y}))};return e.jsxs("div",{className:"menu-management",children:[e.jsx("div",{className:"menu-management-header",children:e.jsx("h2",{children:"Menu Management"})}),e.jsx("div",{className:"add-item-section",children:e.jsxs("div",{className:"add-item-card",children:[e.jsx("div",{className:"add-item-icon",children:e.jsx(Y,{size:32})}),e.jsxs("div",{className:"add-item-content",children:[e.jsx("h3",{children:"Add New Menu Item"}),e.jsx("p",{children:"Create a new coffee or food item for your menu"})]}),e.jsxs("button",{className:"add-item-btn",onClick:()=>d(!0),children:[e.jsx(Y,{size:18}),"Add Item"]})]})}),r&&e.jsx("div",{className:"form-overlay",children:e.jsxs("div",{className:"form-modal",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:a?"Edit Menu Item":"Add New Menu Item"}),e.jsx("button",{className:"close-btn",onClick:q,children:e.jsx(K,{size:20})})]}),e.jsxs("form",{onSubmit:w,className:"menu-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Item Name"}),e.jsx("input",{type:"text",id:"name",value:c.name,onChange:y=>U("name",y.target.value),placeholder:"e.g., Signature Blend",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price (â‚±)"}),e.jsx("input",{type:"number",id:"price",step:"0.01",value:c.price,onChange:y=>U("price",y.target.value),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:c.description,onChange:y=>U("description",y.target.value),placeholder:"Describe the item...",required:!0,rows:3})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Category"}),e.jsx("select",{id:"category",value:c.category,onChange:y=>U("category",y.target.value),children:E.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"icon",children:"Icon"}),e.jsx("select",{id:"icon",value:c.icon,onChange:y=>U("icon",y.target.value),children:t.map(y=>e.jsx("option",{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"image_upload",children:"Product Image (Optional)"}),e.jsxs("div",{className:"image-upload-section",children:[e.jsxs("div",{className:"image-upload-area",children:[e.jsx("input",{type:"file",id:"image_upload",accept:"image/*",onChange:$,style:{display:"none"}}),e.jsx("label",{htmlFor:"image_upload",className:"upload-label",children:e.jsx("div",{className:"upload-content",children:p?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:p,alt:"Preview"}),e.jsxs("div",{className:"upload-overlay",children:[e.jsx(bs,{size:24}),e.jsx("span",{children:"Change Image"})]})]}):e.jsxs("div",{className:"upload-placeholder",children:[e.jsx(ds,{size:32}),e.jsx("span",{children:"Click to upload image"}),e.jsx("small",{children:"JPG, PNG, GIF up to 5MB"})]})})})]}),j&&e.jsxs("div",{className:"image-info",children:[e.jsx("span",{className:"file-name",children:j.name}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{i(null),C(null)},children:e.jsx(K,{size:16})})]})]})]}),e.jsx(aa,{sizes:c.sizes,basePrice:parseFloat(c.price)||0,onSizesChange:ae}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:c.is_popular,onChange:y=>U("is_popular",y.target.checked)}),e.jsx("span",{className:"checkmark"}),"Mark as Popular Item"]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:q,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"save-btn",disabled:o,children:[e.jsx(De,{size:16}),a?"Update Item":"Add Item"]})]})]})]})}),e.jsx("div",{className:"menu-items-grid",children:s.map(y=>e.jsxs("div",{className:"menu-item-card",children:[y.is_featured&&e.jsxs("div",{className:"popular-badge",children:[e.jsx(R,{size:12}),"Popular"]}),e.jsx("div",{className:"item-image",children:y.image_url?e.jsx("img",{src:y.image_url,alt:y.name}):e.jsx("span",{className:"item-icon",children:"â˜•"})}),e.jsxs("div",{className:"item-details",children:[e.jsx("h3",{children:y.name}),e.jsx("p",{className:"item-description",children:y.description}),e.jsxs("div",{className:"item-meta",children:[e.jsx("span",{className:"item-category",children:E.find(_=>_.id===y.category_id)?.label||"Unknown"}),e.jsx("div",{className:"pricing-info",children:y.sizes&&y.sizes.length>0?e.jsxs("div",{className:"size-pricing",children:[e.jsxs("span",{className:"base-price",children:["Base: â‚±",y.base_price]}),e.jsxs("span",{className:"size-count",children:[y.sizes.length," sizes"]}),e.jsxs("div",{className:"size-range",children:["â‚±",Math.min(...y.sizes.map(_=>_.price))," - â‚±",Math.max(...y.sizes.map(_=>_.price))]})]}):e.jsxs("span",{className:"item-price",children:["â‚±",y.base_price]})})]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>b(y),title:"Edit item",children:e.jsx(Te,{size:16})}),e.jsx("button",{className:"delete-btn",onClick:()=>k(y),title:"Delete item",children:e.jsx(oe,{size:16})})]})]},y.id))}),s.length===0&&!o&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No menu items found. Add your first item to get started!"})})]})},ra=()=>{const[s,l]=x.useState([]),[o,g]=x.useState([]),[a,n]=x.useState(""),[r,d]=x.useState("cash"),[c,v]=x.useState(!1),[j,i]=x.useState(""),[p,C]=x.useState("all"),[E,h]=x.useState(!1),[t,m]=x.useState(null),[N,w]=x.useState(null),[b,k]=x.useState(0),q=[{value:"all",label:"All Items"},{value:"hot-coffee",label:"Hot Coffee"},{value:"iced-coffee",label:"Iced Coffee"},{value:"tea",label:"Tea"},{value:"frappe",label:"Frappe"},{value:"pastry",label:"Pastry"},{value:"snacks",label:"Snacks"}];x.useEffect(()=>{$();const u=S.channel("cashier_menu_changes").on("postgres_changes",{event:"*",schema:"public",table:"menu_items"},M=>{console.log("ðŸ”„ Cashier: Menu item change detected:",M),$()}).subscribe();return()=>{u.unsubscribe()}},[]);const $=async(u=0)=>{try{if(console.log("ðŸ½ï¸ Cashier: Fetching menu items from Supabase..."),u===0&&!await ke()){console.warn("âš ï¸ Cashier: Connection test failed, keeping current items");return}const{data:P,error:F}=await S.from("menu_items").select("*").order("name");if(F){if(console.warn("âš ï¸ Supabase fetch error:",F),u<2){console.log(`ðŸ”„ Retrying... (${u+1}/2)`),setTimeout(()=>$(u+1),2e3);return}console.log("âš ï¸ Cashier: Max retries reached, keeping current menu items");return}console.log("âœ… Cashier: Loaded menu items from Supabase:",P?.length||0,"items"),l(P||[]),P&&P.length===0&&console.log("ðŸ“ No menu items in database - please add items in Menu Management first")}catch(P){if(console.error("âŒ Cashier: Fetch failed:",P),P.message?.includes("timeout")&&u<2){console.log(`ðŸ”„ Timeout, retrying... (${u+1}/2)`),setTimeout(()=>$(u+1),2e3);return}console.log("âš ï¸ Cashier: Keeping current menu items due to network error")}},T=u=>{u.sizes&&u.sizes.length>0?(m(u),w(null),k(u.base_price),h(!0)):H(u,void 0,u.base_price)},H=(u,M,P)=>{const F=P||u.base_price;`${u.id}${M||"no-size"}`,g(L=>L.find(B=>B.menu_item.id===u.id&&B.size===M)?L.map(B=>B.menu_item.id===u.id&&B.size===M?{...B,quantity:B.quantity+1}:B):[...L,{menu_item:u,quantity:1,size:M,size_price:F}])},U=(u,M)=>{w(u),k(M)},ae=()=>{t&&(H(t,N||void 0,b),h(!1),m(null),w(null),k(0))},y=()=>{h(!1),m(null),w(null),k(0)},_=(u,M,P)=>{P<=0?g(F=>F.filter(L=>!(L.menu_item.id===u&&L.size===M))):g(F=>F.map(L=>L.menu_item.id===u&&L.size===M?{...L,quantity:P}:L))},O=()=>o.reduce((u,M)=>{const P=M.size_price||M.menu_item.base_price;return u+P*M.quantity},0),D=()=>Math.floor(100+Math.random()*900).toString(),V=async()=>{if(o.length===0){alert("Please add items to cart");return}v(!0);try{const u=D(),M=O(),P={order_number:u,customer_name:a||"Walk-in Customer",customer_email:a||null,total_amount:M,payment_method:r,status:"completed",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("ðŸ’³ Processing order:",P);try{const{data:F,error:L}=await S.from("orders").insert(P).select().single();if(L)throw L;if(F){const se=F.id;if(console.log("âœ… Order saved to database:",se),se){const B=o.map(G=>({order_id:se,menu_item_id:G.menu_item.id,menu_item_name:G.menu_item.name,quantity:G.quantity,unit_price:G.size_price||G.menu_item.base_price,total_price:(G.size_price||G.menu_item.base_price)*G.quantity,special_instructions:G.size?`Size: ${G.size}`:null})),{error:J}=await S.from("order_items").insert(B);J||console.log("âœ… Order items saved to database")}f(F.order_number,F.total_amount),window.dispatchEvent(new CustomEvent("newOrderCreated"))}else throw new Error("Database save failed")}catch(F){console.warn("âš ï¸ Database save failed, processing locally:",F);const L={...P,id:Date.now()},se=JSON.parse(localStorage.getItem("local_orders")||"[]"),B={...L,order_items:o.map(J=>({id:Math.random(),quantity:J.quantity,unit_price:J.size_price||J.menu_item.base_price,total_price:(J.size_price||J.menu_item.base_price)*J.quantity,special_instructions:J.size?`Size: ${J.size}`:null,menu_item:{name:J.menu_item.name,icon:"â˜•"}}))};se.unshift(B),localStorage.setItem("local_orders",JSON.stringify(se)),console.log("âœ… Order saved locally for order history"),f(L.order_number,L.total_amount)}window.dispatchEvent(new CustomEvent("newOrderCreated")),g([]),n(""),alert("Order completed successfully! Check Order History tab to see your order.")}catch(u){console.error("Error processing order:",u),alert("Error processing order: "+u.message)}finally{v(!1)}},f=(u,M)=>{const P=window.open("","_blank","width=400,height=600");P&&(P.document.write(`
        <html>
          <head>
            <title>Order Receipt</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 20px; }
              .header { text-align: center; border-bottom: 2px solid #8b4513; padding-bottom: 10px; }
              .order-number { font-size: 24px; color: #8b4513; font-weight: bold; margin: 20px 0; }
              .items { margin: 20px 0; }
              .item { display: flex; justify-content: space-between; margin: 5px 0; }
              .total { border-top: 2px solid #8b4513; padding-top: 10px; font-weight: bold; font-size: 18px; }
              .footer { text-align: center; margin-top: 20px; color: #666; }
            </style>
          </head>
          <body>
            <div class="header">
              <h1>â˜• EzDevs Coffee</h1>
              <p>Thank you for your order!</p>
            </div>
            <div class="order-number">Order #${u}</div>
            <div class="items">
              ${o.map(F=>`
                <div class="item">
                  <span>${F.menu_item.name}${F.size?` (${F.size})`:""} x ${F.quantity}</span>
                  <span>â‚±${((F.size_price||F.menu_item.base_price)*F.quantity).toFixed(2)}</span>
                </div>
              `).join("")}
            </div>
            <div class="total">
              <div class="item">
                <span>Total:</span>
                <span>â‚±${M.toFixed(2)}</span>
              </div>
            </div>
            <div class="footer">
              <p>Payment: ${r.toUpperCase()}</p>
              <p>Date: ${new Date().toLocaleString()}</p>
              <p>Please present this receipt when collecting your order</p>
            </div>
          </body>
        </html>
      `),P.document.close(),P.print())},I=s.filter(u=>{const M=p==="all",P=u.name.toLowerCase().includes(j.toLowerCase());return M&&P&&u.is_available});return e.jsxs("div",{className:"cashier-interface",children:[e.jsxs("div",{className:"cashier-header",children:[e.jsx("h2",{children:"Cashier / Point of Sale"}),e.jsx("p",{children:"Create orders for walk-in customers"})]}),e.jsxs("div",{className:"cashier-layout",children:[e.jsxs("div",{className:"menu-section",children:[e.jsxs("div",{className:"menu-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ce,{size:20}),e.jsx("input",{type:"text",placeholder:"Search menu items...",value:j,onChange:u=>i(u.target.value)})]}),e.jsx("div",{className:"category-filters",children:q.map(u=>e.jsx("button",{className:`category-btn ${p===u.value?"active":""}`,onClick:()=>C(u.value),children:u.label},u.value))})]}),e.jsx("div",{className:"menu-items-grid",children:I.map(u=>e.jsxs("div",{className:"menu-item-tile",onClick:()=>T(u),children:[e.jsx("div",{className:"item-image",children:u.image_url?e.jsx("img",{src:u.image_url,alt:u.name}):e.jsx("span",{className:"item-icon",children:"â˜•"})}),e.jsxs("div",{className:"item-info",children:[e.jsx("h4",{children:u.name}),e.jsx("div",{className:"pricing-info",children:u.sizes&&u.sizes.length>0?e.jsxs("div",{className:"size-pricing",children:[e.jsxs("p",{className:"base-price",children:["From â‚±",u.base_price]}),e.jsxs("p",{className:"size-count",children:[u.sizes.length," sizes"]})]}):e.jsxs("p",{className:"item-price",children:["â‚±",u.base_price]})})]}),u.is_featured&&e.jsx("div",{className:"popular-indicator",children:"â˜…"}),u.sizes&&u.sizes.length>0&&e.jsx("div",{className:"size-indicator",children:"ðŸ“"})]},u.id))})]}),e.jsxs("div",{className:"order-section",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx(Z,{size:20}),e.jsx("h3",{children:"Current Order"})]}),e.jsxs("div",{className:"customer-info",children:[e.jsx("label",{htmlFor:"customer-email",children:"Customer Email (Optional)"}),e.jsx("input",{type:"email",id:"customer-email",value:a,onChange:u=>n(u.target.value),placeholder:"customer@example.com"})]}),e.jsx("div",{className:"cart-items",children:o.length===0?e.jsx("div",{className:"empty-cart",children:e.jsx("p",{children:"No items in cart"})}):o.map((u,M)=>e.jsxs("div",{className:"cart-item",children:[e.jsxs("div",{className:"cart-item-info",children:[e.jsx("h4",{children:u.menu_item.name}),u.size&&e.jsx("p",{className:"item-size",children:u.size}),e.jsxs("p",{children:["â‚±",(u.size_price||u.menu_item.base_price).toFixed(2)," each"]})]}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>_(u.menu_item.id,u.size,u.quantity-1),children:e.jsx(ie,{size:16})}),e.jsx("span",{children:u.quantity}),e.jsx("button",{onClick:()=>_(u.menu_item.id,u.size,u.quantity+1),children:e.jsx(Y,{size:16})})]}),e.jsxs("div",{className:"item-total",children:["â‚±",((u.size_price||u.menu_item.base_price)*u.quantity).toFixed(2)]})]},`${u.menu_item.id}_${u.size||"no-size"}_${M}`))}),e.jsxs("div",{className:"payment-section",children:[e.jsxs("div",{className:"payment-method",children:[e.jsx("label",{children:"Payment Method:"}),e.jsx("div",{className:"payment-options",children:[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"gcash",label:"GCash"}].map(u=>e.jsx("button",{className:`payment-btn ${r===u.value?"active":""}`,onClick:()=>d(u.value),children:u.label},u.value))})]}),e.jsxs("div",{className:"order-total",children:[e.jsx("div",{className:"total-line",children:e.jsxs("span",{children:["Total Items: ",o.reduce((u,M)=>u+M.quantity,0)]})}),e.jsx("div",{className:"total-line grand-total",children:e.jsxs("span",{children:["Grand Total: â‚±",O().toFixed(2)]})})]}),e.jsx("button",{className:"process-order-btn",onClick:V,disabled:o.length===0||c,children:c?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:20}),"Process Order"]})})]})]})]}),E&&t&&e.jsx("div",{className:"size-modal-overlay",onClick:y,children:e.jsxs("div",{className:"size-modal",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Select Size for ",t.name]}),e.jsx("button",{className:"close-modal-btn",onClick:y,children:e.jsx(K,{size:20})})]}),e.jsxs("div",{className:"modal-content",children:[e.jsx(Le,{item:t,selectedSize:N,onSizeChange:U}),e.jsxs("div",{className:"modal-summary",children:[e.jsxs("p",{children:["Selected: ",N||"No size selected"]}),e.jsxs("p",{className:"modal-price",children:["Price: â‚±",b.toFixed(2)]})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:y,children:"Cancel"}),e.jsxs("button",{className:"add-to-cart-btn",onClick:ae,disabled:!N,children:[e.jsx(Z,{size:16}),"Add to Cart"]})]})]})})]})},ia=()=>{const s=[],[l,o]=x.useState([]),[g]=x.useState(!1),[a,n]=x.useState(""),[r,d]=x.useState("all"),[c,v]=x.useState(null);x.useEffect(()=>{j();const h=S.channel("orders_changes").on("postgres_changes",{event:"*",schema:"public",table:"orders"},N=>{console.log("ðŸ”„ Order change detected:",N),j()}).subscribe(),t=N=>{N.key==="local_orders"&&(console.log("ðŸ“‹ Local orders updated, refreshing order history"),j())},m=()=>{console.log("ðŸ“‹ New order event received, refreshing order history"),setTimeout(j,500)};return window.addEventListener("storage",t),window.addEventListener("newOrderCreated",m),()=>{h.unsubscribe(),window.removeEventListener("storage",t),window.removeEventListener("newOrderCreated",m)}},[]);const j=async(h=0)=>{try{console.log("ðŸ“‹ Order History: Fetching orders from Supabase...");const m=JSON.parse(localStorage.getItem("local_orders")||"[]");if(console.log("ðŸ“‹ Found local orders:",m.length),h===0&&!await ke()){console.warn("âš ï¸ Order History: Connection test failed, using local + fallback");const k=[...m,...s];o(k);return}const{data:N,error:w}=await S.from("orders").select(`
          *,
          order_items (
            id,
            quantity,
            unit_price,
            total_price,
            menu_items (
              name,
              image_url
            )
          )
        `).order("created_at",{ascending:!1});if(w){if(console.warn("âš ï¸ Supabase orders fetch error:",w),h<2){console.log(`ðŸ”„ Retrying... (${h+1}/2)`),setTimeout(()=>j(h+1),2e3);return}o(m);return}if(N&&N.length>0){const b=N.map($=>({...$,order_items:$.order_items?.map(T=>({...T,menu_item:{name:T.menu_items?.name||"Unknown Item",icon:"â˜•",image_url:T.menu_items?.image_url}}))||[]})),q=[...m,...b].filter(($,T,H)=>T===H.findIndex(U=>U.order_number===$.order_number));q.sort(($,T)=>new Date(T.created_at).getTime()-new Date($.created_at).getTime()),console.log("âœ… Order History: Combined orders (DB + Local):",q.length),o(q)}else o(m),console.log("ðŸ“ Order History: No database orders, using local orders only")}catch(m){if(console.error("âŒ Order History: Fetch failed:",m),m.message?.includes("timeout")&&h<2){console.log(`ðŸ”„ Timeout, retrying... (${h+1}/2)`),setTimeout(()=>j(h+1),2e3);return}const N=JSON.parse(localStorage.getItem("local_orders")||"[]");o(N)}},i=async(h,t)=>{try{const{error:m}=await S.from("orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",h);if(m)throw m;await j()}catch(m){console.error("Error updating order status:",m),alert("Error updating order: "+m.message)}},p=l.filter(h=>{const t=r==="all"||h.status===r,m=h.order_number.toLowerCase().includes(a.toLowerCase())||h.customer_email&&h.customer_email.toLowerCase().includes(a.toLowerCase());return t&&m}),C=h=>{switch(h){case"pending":return"#ff9800";case"completed":return"#4caf50";case"cancelled":return"#f44336";default:return"#757575"}},E=h=>new Date(h).toLocaleString();return g?e.jsx("div",{className:"loading",children:"Loading orders..."}):e.jsxs("div",{className:"order-history",children:[e.jsxs("div",{className:"order-history-header",children:[e.jsx("h2",{children:"Order History"}),e.jsx("p",{children:"View and manage all orders"})]}),e.jsxs("div",{className:"orders-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ce,{size:20}),e.jsx("input",{type:"text",placeholder:"Search by order number or customer email...",value:a,onChange:h=>n(h.target.value)})]}),e.jsx("div",{className:"status-filters",children:[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}].map(h=>e.jsx("button",{className:`status-btn ${r===h.value?"active":""}`,onClick:()=>d(h.value),children:h.label},h.value))})]}),e.jsx("div",{className:"orders-list",children:p.map(h=>e.jsxs("div",{className:"order-card",children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("div",{className:"order-number",children:[e.jsxs("strong",{children:["#",h.order_number]}),e.jsx("span",{className:"status-badge",style:{backgroundColor:C(h.status)},children:h.status})]}),e.jsxs("div",{className:"order-date",children:[e.jsx(is,{size:16}),E(h.created_at)]})]}),e.jsxs("div",{className:"order-details",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx(te,{size:16}),e.jsx("span",{children:h.customer_email||"Walk-in Customer"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(ye,{size:16}),e.jsxs("span",{children:["â‚±",(h.total_amount||0).toFixed(2)]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(Ne,{size:16}),e.jsxs("span",{children:[h.order_items.reduce((t,m)=>t+(m.quantity||0),0)," items"]})]})]}),e.jsxs("div",{className:"order-actions",children:[e.jsxs("button",{className:"view-btn",onClick:()=>v(h),children:[e.jsx(xe,{size:16}),"View Details"]}),h.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"complete-btn",onClick:()=>i(h.id,"completed"),children:"Complete"}),e.jsx("button",{className:"cancel-btn",onClick:()=>i(h.id,"cancelled"),children:"Cancel"})]})]})]}),e.jsxs("div",{className:"order-items-preview",children:[h.order_items.slice(0,3).map((t,m)=>e.jsxs("span",{className:"item-preview",children:[t.menu_item.icon," ",t.menu_item.name," (",t.quantity||0,")"]},m)),h.order_items.length>3&&e.jsxs("span",{className:"more-items",children:["+",h.order_items.length-3," more"]})]})]},h.id))}),p.length===0&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No orders found matching your criteria."})}),c&&e.jsx("div",{className:"order-modal-overlay",onClick:()=>v(null),children:e.jsxs("div",{className:"order-modal",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Order #",c.order_number]}),e.jsx("button",{className:"close-modal-btn",onClick:()=>v(null),children:"Ã—"})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"order-summary",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"status-badge",style:{backgroundColor:C(c.status)},children:c.status})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Customer:"}),e.jsx("span",{children:c.customer_email||"Walk-in Customer"})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Payment:"}),e.jsx("span",{children:c.payment_method?.toUpperCase()||"N/A"})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{children:E(c.created_at)})]})]}),e.jsxs("div",{className:"order-items-detail",children:[e.jsx("h4",{children:"Items Ordered:"}),c.order_items.map((h,t)=>e.jsxs("div",{className:"item-detail",children:[e.jsxs("span",{className:"item-name",children:[h.menu_item.icon," ",h.menu_item.name]}),e.jsxs("span",{className:"item-quantity",children:["Ã—",h.quantity||0]}),e.jsxs("span",{className:"item-total",children:["â‚±",(h.total_price||0).toFixed(2)]})]},t))]}),e.jsx("div",{className:"order-total-detail",children:e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Total:"}),e.jsxs("strong",{children:["â‚±",(c.total_amount||0).toFixed(2)]})]})})]})]})})]})},na=()=>{const[s,l]=x.useState("overview"),[o,g]=x.useState({totalOrders:0,totalRevenue:0,totalMenuItems:0,totalCustomers:0}),{isAdminUser:a}=ee();x.useEffect(()=>{n()},[]);const n=async()=>{try{console.log("ðŸ“Š Dashboard: Attempting to fetch real stats...");const[d,c,v]=await Promise.allSettled([S.from("orders").select("total_amount, status").eq("status","completed"),S.from("menu_items").select("id"),S.from("user_profiles").select("id").eq("role","customer")]);let j=0,i=0,p=0,C=0;if(d.status==="fulfilled"&&!d.value.error){const E=d.value.data||[];j=E.length,i=E.reduce((h,t)=>h+Number(t.total_amount),0)}c.status==="fulfilled"&&!c.value.error&&(p=c.value.data?.length||0),v.status==="fulfilled"&&!v.value.error&&(C=v.value.data?.length||0),g({totalOrders:j,totalRevenue:i,totalMenuItems:p,totalCustomers:C}),console.log("âœ… Dashboard: Updated with real stats",{totalOrders:j,totalRevenue:i,totalMenuItems:p,totalCustomers:C})}catch(d){console.log("âš ï¸ Dashboard: Stats fetch failed, using zero stats:",d)}};if(!a)return e.jsx("div",{className:"admin-dashboard",children:e.jsxs("div",{className:"access-denied",children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access this page."})]})});const r=[{id:"overview",name:"Overview",icon:ye},{id:"menu",name:"Menu Management",icon:R},{id:"cashier",name:"Cashier/Orders",icon:Z},{id:"orders",name:"Order History",icon:le}];return e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Admin Dashboard"}),e.jsx("p",{children:"Manage your coffee shop operations"})]}),e.jsx("div",{className:"dashboard-tabs",children:r.map(d=>{const c=d.icon;return e.jsxs("button",{className:`dashboard-tab ${s===d.id?"active":""}`,onClick:()=>l(d.id),children:[e.jsx(c,{size:20}),d.name]},d.id)})}),e.jsxs("div",{className:"dashboard-content",children:[s==="overview"&&e.jsxs("div",{className:"overview-section",children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon orders",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:o.totalOrders}),e.jsx("p",{children:"Total Orders"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon revenue",children:e.jsx(ye,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("h3",{children:["â‚±",o.totalRevenue.toLocaleString()]}),e.jsx("p",{children:"Total Revenue"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon menu",children:e.jsx(R,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:o.totalMenuItems}),e.jsx("p",{children:"Menu Items"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon customers",children:e.jsx(le,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:o.totalCustomers}),e.jsx("p",{children:"Customers"})]})]})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("h3",{children:"Quick Actions"}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{className:"action-btn menu-btn",onClick:()=>l("menu"),children:[e.jsx(R,{size:20}),"Manage Menu"]}),e.jsxs("button",{className:"action-btn cashier-btn",onClick:()=>l("cashier"),children:[e.jsx(Z,{size:20}),"Create Order"]}),e.jsxs("button",{className:"action-btn orders-btn",onClick:()=>l("orders"),children:[e.jsx(le,{size:20}),"View Orders"]})]})]})]}),s==="menu"&&e.jsx(ta,{}),s==="cashier"&&e.jsx(ra,{}),s==="orders"&&e.jsx(ia,{})]})]})},ca=()=>{const{user:s,isAdminUser:l}=ee(),[o,g]=x.useState([]),[a,n]=x.useState([]),[r,d]=x.useState([]),[c,v]=x.useState(""),[j,i]=x.useState(""),[p,C]=x.useState(""),[E,h]=x.useState(""),[t,m]=x.useState("dine-in"),[N,w]=x.useState(""),[b,k]=x.useState(!1),[q,$]=x.useState("order");x.useEffect(()=>{T(),H();const f=S.channel("orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>{H()}).subscribe();return()=>{S.removeChannel(f)}},[]);const T=async()=>{try{const{data:f,error:I}=await S.from("menu_items").select(`
          id,
          name,
          description,
          base_price,
          image_url,
          is_available,
          menu_categories (name)
        `).eq("is_available",!0);if(I)throw I;const u=f.map(M=>({...M,category_name:M.menu_categories?.name||"Other"}));g(u)}catch(f){console.error("Error fetching menu items:",f)}},H=async()=>{try{const{data:f,error:I}=await S.from("orders").select(`
          id,
          order_number,
          customer_name,
          customer_email,
          customer_phone,
          order_type,
          status,
          total_amount,
          table_number,
          created_at,
          order_items (
            id,
            menu_item_name,
            quantity,
            unit_price,
            total_price,
            special_instructions
          )
        `).in("status",["pending","confirmed","preparing","ready"]).order("created_at",{ascending:!1});if(I)throw I;d(f||[])}catch(f){console.error("Error fetching orders:",f)}},U=f=>{n(I=>I.find(M=>M.menu_item.id===f.id)?I.map(M=>M.menu_item.id===f.id?{...M,quantity:M.quantity+1,total_price:(M.quantity+1)*M.unit_price}:M):[...I,{id:`temp-${Date.now()}`,menu_item:f,quantity:1,unit_price:f.base_price,total_price:f.base_price}])},ae=(f,I)=>{n(I===0?u=>u.filter(M=>M.id!==f):u=>u.map(M=>M.id===f?{...M,quantity:I,total_price:I*M.unit_price}:M))},y=()=>{n([]),i(""),C(""),h(""),w("")},_=()=>a.reduce((f,I)=>f+I.total_price,0),O=async()=>{if(!j.trim()||a.length===0){alert("Please enter customer name and add items to cart");return}k(!0);try{const f={customer_name:j,customer_email:p||null,customer_phone:E||null,order_type:t,status:"confirmed",total_amount:_(),table_number:t==="dine-in"&&N?parseInt(N):null,cashier_id:s?.id},{data:I,error:u}=await S.from("orders").insert(f).select().single();if(u)throw u;const M=a.map(F=>({order_id:I.id,menu_item_id:F.menu_item.id,menu_item_name:F.menu_item.name,quantity:F.quantity,unit_price:F.unit_price,total_price:F.total_price,special_instructions:F.special_instructions||null})),{error:P}=await S.from("order_items").insert(M);if(P)throw P;alert(`Order ${I.order_number} created successfully!`),y(),H()}catch(f){console.error("Error processing order:",f),alert("Error processing order. Please try again.")}finally{k(!1)}},D=async(f,I)=>{try{const{error:u}=await S.from("orders").update({status:I,...I==="completed"&&{completed_at:new Date().toISOString()}}).eq("id",f);if(u)throw u;H()}catch(u){console.error("Error updating order status:",u)}},V=o.filter(f=>f.name.toLowerCase().includes(c.toLowerCase())||f.category_name.toLowerCase().includes(c.toLowerCase()));return!s||!l?e.jsx("div",{className:"cashier-error",children:"Access denied. Admin privileges required."}):e.jsxs("div",{className:"cashier-container",children:[e.jsxs("div",{className:"cashier-header",children:[e.jsx("h1",{children:"Cashier Interface"}),e.jsxs("div",{className:"cashier-tabs",children:[e.jsxs("button",{className:`tab ${q==="order"?"active":""}`,onClick:()=>$("order"),children:[e.jsx(Z,{size:20}),"New Order"]}),e.jsxs("button",{className:`tab ${q==="queue"?"active":""}`,onClick:()=>$("queue"),children:[e.jsx(Q,{size:20}),"Order Queue (",r.length,")"]})]})]}),q==="order"?e.jsxs("div",{className:"order-interface",children:[e.jsxs("div",{className:"menu-section",children:[e.jsxs("div",{className:"menu-header",children:[e.jsx("h2",{children:"Menu"}),e.jsxs("div",{className:"search-bar",children:[e.jsx(Ce,{size:20}),e.jsx("input",{type:"text",placeholder:"Search menu items...",value:c,onChange:f=>v(f.target.value)})]})]}),e.jsx("div",{className:"menu-items-grid",children:V.map(f=>e.jsxs("div",{className:"menu-item-card",onClick:()=>U(f),children:[f.image_url&&e.jsx("img",{src:f.image_url,alt:f.name}),e.jsxs("div",{className:"item-info",children:[e.jsx("h3",{children:f.name}),e.jsx("p",{className:"category",children:f.category_name}),e.jsxs("p",{className:"price",children:["$",f.base_price.toFixed(2)]})]})]},f.id))})]}),e.jsxs("div",{className:"order-section",children:[e.jsx("h2",{children:"Current Order"}),e.jsxs("div",{className:"customer-info",children:[e.jsx("input",{type:"text",placeholder:"Customer Name *",value:j,onChange:f=>i(f.target.value),required:!0}),e.jsx("input",{type:"email",placeholder:"Customer Email (optional)",value:p,onChange:f=>C(f.target.value)}),e.jsx("input",{type:"tel",placeholder:"Customer Phone (optional)",value:E,onChange:f=>h(f.target.value)}),e.jsxs("div",{className:"order-type",children:[e.jsx("label",{children:"Order Type:"}),e.jsxs("select",{value:t,onChange:f=>m(f.target.value),children:[e.jsx("option",{value:"dine-in",children:"Dine In"}),e.jsx("option",{value:"takeaway",children:"Takeaway"}),e.jsx("option",{value:"delivery",children:"Delivery"})]})]}),t==="dine-in"&&e.jsx("input",{type:"number",placeholder:"Table Number",value:N,onChange:f=>w(f.target.value)})]}),e.jsx("div",{className:"cart-items",children:a.map(f=>e.jsxs("div",{className:"cart-item",children:[e.jsxs("div",{className:"item-details",children:[e.jsx("h4",{children:f.menu_item.name}),e.jsxs("p",{children:["$",f.unit_price.toFixed(2)," each"]})]}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>ae(f.id,f.quantity-1),children:e.jsx(ie,{size:16})}),e.jsx("span",{children:f.quantity}),e.jsx("button",{onClick:()=>ae(f.id,f.quantity+1),children:e.jsx(Y,{size:16})})]}),e.jsxs("div",{className:"item-total",children:["$",f.total_price.toFixed(2)]})]},f.id))}),e.jsxs("div",{className:"order-summary",children:[e.jsx("div",{className:"total",children:e.jsxs("strong",{children:["Total: $",_().toFixed(2)]})}),e.jsxs("div",{className:"order-actions",children:[e.jsx("button",{className:"clear-btn",onClick:y,children:"Clear Cart"}),e.jsx("button",{className:"process-btn",onClick:O,disabled:b||a.length===0,children:b?"Processing...":"Process Order"})]})]})]})]}):e.jsx("div",{className:"queue-interface",children:e.jsx("div",{className:"orders-grid",children:r.map(f=>e.jsxs("div",{className:`order-card status-${f.status}`,children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("h3",{children:["#",f.order_number]}),e.jsx("span",{className:`status-badge ${f.status}`,children:f.status.toUpperCase()})]}),e.jsxs("div",{className:"order-info",children:[e.jsxs("p",{children:[e.jsx(te,{size:16})," ",f.customer_name]}),e.jsxs("p",{children:[e.jsx(Q,{size:16})," ",new Date(f.created_at).toLocaleTimeString()]}),e.jsxs("p",{children:["Type: ",f.order_type]}),f.table_number&&e.jsxs("p",{children:["Table: ",f.table_number]}),e.jsxs("p",{className:"total",children:["Total: $",f.total_amount.toFixed(2)]})]}),e.jsx("div",{className:"order-items",children:f.order_items?.map((I,u)=>e.jsxs("div",{className:"order-item",children:[I.quantity,"x ",I.menu_item_name]},u))}),e.jsxs("div",{className:"order-actions",children:[f.status==="pending"&&e.jsxs("button",{className:"confirm-btn",onClick:()=>D(f.id,"confirmed"),children:[e.jsx(me,{size:16})," Confirm"]}),f.status==="confirmed"&&e.jsxs("button",{className:"prepare-btn",onClick:()=>D(f.id,"preparing"),children:[e.jsx(Q,{size:16})," Start Preparing"]}),f.status==="preparing"&&e.jsxs("button",{className:"ready-btn",onClick:()=>D(f.id,"ready"),children:[e.jsx(me,{size:16})," Mark Ready"]}),f.status==="ready"&&e.jsxs("button",{className:"complete-btn",onClick:()=>D(f.id,"completed"),children:[e.jsx(me,{size:16})," Complete Order"]})]})]},f.id))})})]})},la=()=>{const[s,l]=x.useState("Testing..."),[o,g]=x.useState([]);x.useEffect(()=>{n()},[]);const a=r=>{console.log(r),g(d=>[...d,r])},n=async()=>{try{a("ðŸ” Starting Supabase tests..."),a("Test 1: Testing basic connection...");try{const d=await fetch("https://luolyadipwdyvovcjgvv.supabase.co/rest/v1/",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1b2x5YWRpcHdkeXZvdmNqZ3Z2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0ODM3ODEsImV4cCI6MjA4MDA1OTc4MX0.FTz9KJm6KBc0ijbXwZU-PtJoWURkZ4HGeMMThOoP9qs"}});a(`âœ… Raw fetch status: ${d.status}`);const c=await d.text();a(`ðŸ“„ Response: ${c.substring(0,100)}...`)}catch(d){a(`âŒ Raw fetch failed: ${d.message}`)}a("Test 2: Testing Supabase client...");try{const{data:d,error:c}=await S.from("menu_items").select("count",{count:"exact",head:!0});a("âœ… Client call completed"),a(`ðŸ“Š Data: ${JSON.stringify(d)}`),a(`âŒ Error: ${JSON.stringify(c)}`)}catch(d){a(`âŒ Client call failed: ${d.message}`)}a("Test 3: Checking auth...");const{data:{session:r}}=await S.auth.getSession();a(`ðŸ‘¤ Session: ${r?"Logged in":"Anonymous"}`),a("Test 4: Attempting simple select...");try{const{data:d,error:c}=await S.from("menu_items").select("*").limit(1);a("âœ… Select completed"),a(`ðŸ“Š Data count: ${d?.length||0}`),c&&(a(`âŒ Error: ${c.message} (Code: ${c.code})`),a(`ðŸ”§ Hint: ${c.hint||"No hint"}`),a(`ðŸ“ Details: ${c.details||"No details"}`))}catch(d){a(`âŒ Select failed: ${d.message}`)}l("Tests completed")}catch(r){a(`ðŸ’¥ Test suite failed: ${r.message}`),l("Tests failed")}};return e.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[e.jsx("h2",{children:"Supabase Connection Test"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s]}),e.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"5px",maxHeight:"500px",overflowY:"auto"},children:o.map((r,d)=>e.jsx("div",{style:{marginBottom:"5px"},children:r},d))}),e.jsx("button",{onClick:n,style:{marginTop:"10px",padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Run Tests Again"})]})},oa=()=>{const{user:s}=ee(),[l,o]=x.useState([]),[g,a]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{d()},[s]);const d=async()=>{try{r(!0);let t=localStorage.getItem("session_cart_id");t||(t=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("session_cart_id",t));let m=null;try{let N=S.from("session_carts").select("*");s?N=N.eq("user_id",s.id):N=N.eq("session_id",t);const{data:w}=await N.order("created_at",{ascending:!1}).limit(1);w&&w.length>0&&(m=w[0])}catch(N){console.log("Error getting existing cart:",N)}if(!m)try{const{data:N,error:w}=await S.from("session_carts").insert({user_id:s?.id||null,session_id:t,expires_at:new Date(Date.now()+864e5).toISOString()}).select("*").single();!w&&N?m=N:w&&console.error("Error creating cart:",w)}catch(N){console.error("Error creating cart:",N)}m&&(a(m.id),await c(m.id))}catch(t){console.error("Error initializing cart:",t)}finally{r(!1)}},c=async t=>{try{const{data:m,error:N}=await S.from("cart_items").select(`
          id,
          menu_item_id,
          quantity,
          unit_price,
          total_price,
          special_instructions,
          menu_items (
            name,
            image_url
          )
        `).eq("cart_id",t).order("created_at");if(N){console.error("Error loading cart items:",N);return}const w=(m||[]).map(b=>({id:b.id,menu_item_id:b.menu_item_id,name:b.menu_items?.name||"Unknown Item",price:b.unit_price,quantity:b.quantity,image:b.menu_items?.image_url||"â˜•",total_price:b.total_price,special_instructions:b.special_instructions}));o(w)}catch(m){console.error("Error loading cart items:",m)}},v=async(t,m=1,N,w)=>{try{if(!g){await d();return}const b=t.base_price||t.price||0,k=N&&t.sizes?.find(T=>T.name===N)?.price||b;if(!k||k<=0)throw console.error("Invalid unit price for product:",t),new Error("Product price is missing or invalid");const q=l.find(T=>T.menu_item_id===t.id&&T.size===N);if(q)await j(q.id,q.quantity+m);else try{const{error:T}=await S.from("cart_items").insert({cart_id:g,menu_item_id:t.id,quantity:m,unit_price:k,total_price:k*m,special_instructions:w});if(T){console.error("Error adding item:",T);return}await c(g)}catch(T){console.error("Error adding item to cart:",T)}const $=N?`${t.name} (${N})`:t.name;console.log(`âœ… ${$} added to cart!`)}catch(b){throw console.error("Error adding item to cart:",b),b}},j=async(t,m)=>{try{if(m<=0){await i(t);return}const N=l.find(b=>b.id===t);if(!N)return;const{error:w}=await S.from("cart_items").update({quantity:m,total_price:N.price*m,updated_at:new Date().toISOString()}).eq("id",t);if(w){console.error("Error updating quantity:",w);return}o(b=>b.map(k=>k.id===t?{...k,quantity:m,total_price:k.price*m}:k))}catch(N){throw console.error("Error updating quantity:",N),N}},i=async t=>{try{const{error:m}=await S.from("cart_items").delete().eq("id",t);if(m){console.error("Error removing item:",m);return}o(N=>N.filter(w=>w.id!==t))}catch(m){throw console.error("Error removing item:",m),m}},p=async()=>{try{if(!g)return;const{error:t}=await S.from("cart_items").delete().eq("cart_id",g);if(t){console.error("Error clearing cart:",t);return}o([])}catch(t){throw console.error("Error clearing cart:",t),t}},C=async t=>{try{if(!g||l.length===0)return null;const m={customer_id:s?.id||null,customer_name:t.name||"Guest Customer",customer_email:t.email||s?.email||null,customer_phone:t.phone||null,order_type:t.orderType||"takeaway",status:"pending",subtotal:h,tax_amount:h*.08,total_amount:h*1.08,table_number:t.tableNumber||null,notes:t.notes||null},{data:N,error:w}=await S.from("orders").insert(m).select("id, order_number").single();if(w)throw w;const b=l.map(q=>({order_id:N.id,menu_item_id:q.menu_item_id,menu_item_name:q.name,quantity:q.quantity,unit_price:q.price,total_price:q.total_price,special_instructions:q.special_instructions})),{error:k}=await S.from("order_items").insert(b);if(k)throw k;return await p(),s||(await S.from("session_carts").delete().eq("id",g),localStorage.removeItem("session_cart_id"),a(null)),N.order_number}catch(m){throw console.error("Error converting cart to order:",m),m}},E=l.reduce((t,m)=>t+m.quantity,0),h=l.reduce((t,m)=>t+m.total_price,0);return{items:l,totalItems:E,totalPrice:h,cartId:g,loading:n,addItem:v,updateQuantity:j,removeItem:i,clearCart:p,convertToOrder:C}},da=()=>{const[s,l]=x.useState(!0),{user:o,loading:g,isAdminUser:a}=ee(),n=oa();x.useEffect(()=>{const d=setTimeout(()=>{l(!1)},500);return()=>clearTimeout(d)},[]);const r=()=>{window.location.href="/cart"};return s||g?e.jsx(qs,{}):e.jsxs("div",{className:"App",children:[e.jsx(Is,{}),e.jsx(Es,{}),e.jsx("main",{children:e.jsxs(Je,{children:[e.jsx(W,{path:"/",element:e.jsx(Vs,{})}),e.jsx(W,{path:"/menu",element:e.jsx(Gs,{cart:n})}),e.jsx(W,{path:"/about",element:e.jsx(Ys,{})}),e.jsx(W,{path:"/contact",element:e.jsx(Qs,{})}),e.jsx(W,{path:"/cart",element:e.jsx(ea,{cart:n})}),e.jsx(W,{path:"/orders",element:o?e.jsx(sa,{}):e.jsx(ne,{to:"/auth",replace:!0})}),e.jsx(W,{path:"/admin",element:a?e.jsx(na,{}):e.jsx(ne,{to:"/auth",replace:!0})}),e.jsx(W,{path:"/cashier",element:o&&(a||o?.email?.includes("cashier"))?e.jsx(ca,{}):e.jsx(ne,{to:"/auth",replace:!0})}),e.jsx(W,{path:"/test",element:e.jsx(la,{})}),e.jsx(W,{path:"/auth",element:o?e.jsx(ne,{to:"/",replace:!0}):e.jsx(Ds,{})}),e.jsx(W,{path:"*",element:e.jsx(ne,{to:"/",replace:!0})})]})}),e.jsx(Os,{}),e.jsx(Ps,{items:n.items,onUpdateQuantity:n.updateQuantity,onRemoveItem:n.removeItem,onCheckout:r})]})};function ma(){return e.jsx(Ms,{children:e.jsx(Ve,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(da,{})})})}Qe.createRoot(document.getElementById("root")).render(e.jsx(ve.StrictMode,{children:e.jsx(ma,{})}));
